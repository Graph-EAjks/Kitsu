{"version":3,"file":"Bots-CaobCuBc.js","sources":["../../src/components/modals/NewTokenModal.vue","../../src/components/pages/Bots.vue"],"sourcesContent":["<template>\n  <div class=\"modal\" :class=\"{ 'is-active': active }\">\n    <div class=\"modal-background\"></div>\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\">\n          {{ $t('bots.new_token_title', { name: person.full_name }) }}\n        </h1>\n\n        <form class=\"form\" @submit.prevent v-if=\"!person.access_token\">\n          <p class=\"mb2 warning-text\">\n            <alert-triangle-icon class=\"icon mr05 warning\" />\n            {{ $t('bots.new_token_warning') }}\n          </p>\n          <date-field\n            :invalid=\"!isValidExpirationDate\"\n            :label=\"$t('bots.fields.expiration_date')\"\n            :min-date=\"today\"\n            v-model=\"form.expiration_date\"\n          />\n          <div class=\"flexrow right\">\n            <button\n              class=\"button flexrow-item is-primary\"\n              :disabled=\"!isValidExpirationDate\"\n              @click=\"generateToken\"\n            >\n              {{ $t('bots.generate') }}\n            </button>\n            <button\n              class=\"button flexrow-item is-link\"\n              @click=\"$emit('cancel')\"\n            >\n              {{ $t('main.cancel') }}\n            </button>\n          </div>\n        </form>\n\n        <template v-else>\n          <p class=\"mb2 warning-text\">\n            <alert-triangle-icon class=\"icon mr05 warning\" />\n            {{ $t('bots.copy_token_warning') }}\n          </p>\n          <div class=\"token\">\n            <text-field\n              ref=\"token\"\n              :disabled=\"!visible\"\n              input-class=\" token-input\"\n              :readonly=\"true\"\n              :type=\"visible ? 'text' : 'password'\"\n              :model-value=\"person.access_token\"\n            />\n            <eye-off-icon\n              v-if=\"visible\"\n              class=\"icon\"\n              @click=\"visible = false\"\n            />\n            <eye-icon v-else class=\"icon\" @click=\"visible = true\" />\n          </div>\n          <div class=\"flexrow right\">\n            <Transition name=\"fade\">\n              <p class=\"success has-text-right mr05\" v-if=\"message\">\n                {{ message }}\n              </p>\n            </Transition>\n            <button\n              class=\"button flexrow-item is-primary\"\n              @click=\"copyClicked\"\n              :disabled=\"!person.access_token\"\n            >\n              {{ $t('main.copy') }}\n            </button>\n            <button class=\"button flexrow-item is-link\" @click=\"$emit('close')\">\n              {{ $t('main.close') }}\n            </button>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { AlertTriangleIcon, EyeIcon, EyeOffIcon } from 'lucide-vue-next'\n\nimport { modalMixin } from '@/components/modals/base_modal'\nimport { timeMixin } from '@/components/mixins/time'\n\nimport DateField from '@/components/widgets/DateField.vue'\nimport TextField from '@/components/widgets/TextField.vue'\n\nexport default {\n  name: 'new-token-modal',\n\n  mixins: [modalMixin, timeMixin],\n\n  components: {\n    AlertTriangleIcon,\n    DateField,\n    EyeIcon,\n    EyeOffIcon,\n    TextField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    person: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  emits: ['cancel', 'close', 'generate-token'],\n\n  data() {\n    return {\n      form: {\n        expiration_date: null\n      },\n      message: null,\n      visible: false\n    }\n  },\n\n  computed: {\n    isValidExpirationDate() {\n      return (\n        !this.form.expiration_date ||\n        new Date(this.form.expiration_date) > new Date()\n      )\n    }\n  },\n\n  methods: {\n    generateToken() {\n      this.$emit('generate-token', {\n        id: this.person.id,\n        expiration_date: this.form.expiration_date\n      })\n    },\n\n    async copyClicked() {\n      this.message = null\n      await navigator.clipboard.writeText(this.person.access_token)\n      this.message = this.$t('bots.token_copied')\n      setTimeout(() => {\n        this.message = null\n      }, 5000)\n    },\n\n    resetForm() {\n      this.form = {\n        expiration_date: this.person.expiration_date\n      }\n      this.message = null\n      this.visible = false\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.resetForm()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.warning {\n  color: $orange;\n}\n\n.token {\n  position: relative;\n\n  :deep(.token-input) {\n    padding-right: 50px;\n\n    &[type='text'] {\n      text-overflow: ellipsis;\n    }\n  }\n\n  .icon {\n    cursor: pointer;\n    opacity: 0.5;\n    position: absolute;\n    right: 15px;\n    top: 15px;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n\n.right {\n  justify-content: flex-end;\n}\n\n.fade-enter-active {\n  transition: all 0.3s ease;\n}\n.fade-leave-active {\n  transition: opacity 0.8s ease;\n}\n.fade-enter {\n  transform: translateX(20px);\n  opacity: 0;\n}\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"bots page fixed-page\">\n    <div class=\"flexrow page-header\">\n      <page-title class=\"flexrow-item filler\" :text=\"$t('bots.title')\" />\n      <button-simple\n        class=\"flexrow-item\"\n        :text=\"$t('bots.new_bot')\"\n        :is-responsive=\"true\"\n        icon=\"plus\"\n        @click=\"onNewClicked\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n    </div>\n\n    <div class=\"flexrow search-options\">\n      <search-field\n        ref=\"search-field\"\n        class=\"search flexrow-item\"\n        @change=\"onSearchChange\"\n        placeholder=\"ex: gazu bot\"\n      />\n      <combobox-department\n        class=\"flexrow-item\"\n        :label=\"$t('main.department')\"\n        v-model=\"selectedDepartment\"\n      />\n      <combobox-styled\n        class=\"flexrow-item\"\n        :label=\"$t('people.fields.role')\"\n        locale-key-prefix=\"people.role.\"\n        :options=\"roleOptions\"\n        v-model=\"role\"\n      />\n    </div>\n\n    <div class=\"query-list\"></div>\n\n    <people-list\n      :entries=\"currentPeople\"\n      :is-bots=\"true\"\n      :is-loading=\"isPeopleLoading\"\n      :is-error=\"isPeopleLoadingError\"\n      @avatar-clicked=\"onAvatarClicked\"\n      @delete-clicked=\"onDeleteClicked\"\n      @edit-clicked=\"onEditClicked\"\n      @refresh-clicked=\"onRefreshClicked\"\n      v-if=\"isPeopleLoading || currentPeople.length > 0\"\n    />\n    <div class=\"has-text-centered strong\" v-else>\n      <p>{{ $t('bots.no_bot') }}</p>\n      <button-simple\n        class=\"mt1\"\n        :text=\"$t('bots.new_bot')\"\n        :is-responsive=\"true\"\n        @click=\"onNewClicked\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n    </div>\n\n    <edit-avatar-modal\n      :active=\"modals.avatar\"\n      :error-text=\"$t('bots.edit_avatar_error')\"\n      :is-deleting=\"loading.deletingAvatar\"\n      :is-error=\"errors.avatar\"\n      :is-updating=\"loading.updatingAvatar\"\n      :person=\"personToEdit\"\n      @close=\"modals.avatar = false\"\n      @delete=\"deleteAvatar\"\n      @update=\"updateAvatar\"\n    />\n\n    <edit-person-modal\n      :active=\"modals.edit\"\n      :is-bot=\"true\"\n      :is-error=\"errors.edit\"\n      :is-loading=\"loading.edit\"\n      :is-user-limit-error=\"errors.userLimit\"\n      :person-to-edit=\"personToEdit\"\n      @cancel=\"modals.edit = false\"\n      @confirm=\"confirmEditPeople\"\n    />\n\n    <new-token-modal\n      :active=\"modals.newToken\"\n      :person=\"personToEdit\"\n      @cancel=\"modals.newToken = false\"\n      @close=\"modals.newToken = false\"\n      @generate-token=\"confirmGenerateToken\"\n    />\n\n    <hard-delete-modal\n      :active=\"modals.del\"\n      :error-text=\"$t('people.delete_error')\"\n      :is-loading=\"loading.del\"\n      :is-error=\"errors.del\"\n      :lock-text=\"personToDelete ? personToDelete.full_name : ''\"\n      :text=\"deleteText\"\n      @cancel=\"modals.del = false\"\n      @confirm=\"confirmDeletePeople\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { searchMixin } from '@/components/mixins/search'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport ComboboxDepartment from '@/components/widgets/ComboboxDepartment.vue'\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled.vue'\nimport EditAvatarModal from '@/components/modals/EditAvatarModal.vue'\nimport EditPersonModal from '@/components/modals/EditPersonModal.vue'\nimport HardDeleteModal from '@/components/modals/HardDeleteModal.vue'\nimport NewTokenModal from '@/components/modals/NewTokenModal.vue'\nimport PageTitle from '@/components/widgets/PageTitle.vue'\nimport PeopleList from '@/components/lists/PeopleList.vue'\nimport SearchField from '@/components/widgets/SearchField.vue'\n\nexport default {\n  name: 'bots',\n\n  mixins: [searchMixin],\n\n  components: {\n    ButtonSimple,\n    ComboboxDepartment,\n    ComboboxStyled,\n    EditAvatarModal,\n    EditPersonModal,\n    HardDeleteModal,\n    NewTokenModal,\n    PageTitle,\n    PeopleList,\n    SearchField\n  },\n\n  data() {\n    return {\n      role: 'all',\n      roleOptions: [\n        { label: 'all', value: 'all' },\n        { label: 'admin', value: 'admin' },\n        { label: 'client', value: 'client' },\n        { label: 'manager', value: 'manager' },\n        { label: 'supervisor', value: 'supervisor' },\n        { label: 'user', value: 'user' },\n        { label: 'vendor', value: 'vendor' }\n      ],\n      errors: {\n        avatar: false,\n        del: false,\n        edit: false,\n        userLimit: false\n      },\n      loading: {\n        del: false,\n        deletingAvatar: false,\n        edit: false,\n        updatingAvatar: false\n      },\n      modals: {\n        avatar: false,\n        del: false,\n        edit: false,\n        newToken: false\n      },\n      personToDelete: {},\n      personToEdit: { role: 'user' },\n      selectedDepartment: ''\n    }\n  },\n\n  mounted() {\n    this.role = this.$route.query.role || 'all'\n    this.selectedDepartment = this.$route.query.department || ''\n    this.setSearchFromUrl()\n    this.loadPeople(() => {\n      this.onSearchChange()\n    })\n  },\n\n  watch: {\n    'modals.edit'() {\n      if (this.modals.edit) {\n        this.errors.edit = false\n        this.errors.userLimit = false\n        this.loading.edit = false\n      }\n    },\n\n    selectedDepartment() {\n      this.updateRoute()\n    },\n\n    role() {\n      this.updateRoute()\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'displayedPeople',\n      'isCurrentUserAdmin',\n      'isPeopleLoading',\n      'isPeopleLoadingError'\n    ]),\n\n    currentPeople() {\n      let people = this.displayedPeople.filter(person => person.is_bot)\n      if (this.role !== 'all') {\n        people = people.filter(person => person.role === this.role)\n      }\n      if (this.selectedDepartment) {\n        people = people.filter(person =>\n          person.departments.includes(this.selectedDepartment)\n        )\n      }\n      return people\n    },\n\n    deleteText() {\n      const personName = this.personToDelete?.full_name\n      return personName ? this.$t('people.delete_text', { personName }) : ''\n    },\n\n    searchField() {\n      return this.$refs['search-field']\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'clearPersonAvatar',\n      'deletePeople',\n      'editPerson',\n      'generateToken',\n      'loadPeople',\n      'newPerson',\n      'setPeopleSearch',\n      'uploadPersonAvatar'\n    ]),\n\n    async deleteAvatar() {\n      this.loading.deletingAvatar = true\n      try {\n        await this.clearPersonAvatar(this.personToEdit)\n        this.modals.avatar = false\n      } catch (err) {\n        this.errors.avatar = true\n      }\n      this.loading.deletingAvatar = false\n    },\n\n    async updateAvatar(formData) {\n      this.loading.updatingAvatar = true\n      try {\n        await this.uploadPersonAvatar({ person: this.personToEdit, formData })\n        this.modals.avatar = false\n      } catch (err) {\n        this.errors.avatar = true\n      }\n      this.loading.updatingAvatar = false\n    },\n\n    confirmGenerateToken(form) {\n      this.generateToken(form)\n        .then(person => {\n          this.updatePersonToEdit(person)\n        })\n        .catch(console.error)\n    },\n\n    confirmEditPeople(form) {\n      let action = 'editPerson'\n      if (this.personToEdit.id === undefined) action = 'newPerson'\n      else form.id = this.personToEdit.id\n      this.loading.edit = true\n      this.errors.edit = false\n      this.errors.userLimit = false\n      this[action](form)\n        .then(person => {\n          this.loading.edit = false\n          this.modals.edit = false\n          const access_token = person.access_token\n          if (access_token?.length) {\n            this.updatePersonToEdit(person)\n            this.modals.newToken = true\n          }\n        })\n        .catch(err => {\n          console.error(err)\n          const isUserLimitReached =\n            err.body?.message?.includes('limit') ?? false\n          if (isUserLimitReached) {\n            this.errors.userLimit = true\n          } else {\n            this.errors.edit = true\n          }\n          this.loading.edit = false\n        })\n    },\n\n    confirmDeletePeople() {\n      this.loading.del = true\n      this.errors.del = false\n      this.deletePeople(this.personToDelete)\n        .then(() => {\n          this.loading.del = false\n          this.modals.del = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.del = false\n          this.errors.del = true\n        })\n    },\n\n    onSearchChange() {\n      if (!this.searchField) return\n      const searchQuery = this.searchField.getValue()\n      if (searchQuery.length !== 1) {\n        this.setPeopleSearch(searchQuery)\n        this.updateRoute()\n      }\n    },\n\n    onAvatarClicked(person) {\n      this.updatePersonToEdit(person)\n      this.errors.avatar = false\n      this.modals.avatar = true\n    },\n\n    onDeleteClicked(person) {\n      this.personToDelete = person\n      this.modals.del = true\n    },\n\n    onEditClicked(person) {\n      this.updatePersonToEdit(person)\n      this.modals.edit = true\n    },\n\n    onRefreshClicked(person) {\n      this.updatePersonToEdit(person)\n      this.modals.newToken = true\n    },\n\n    onNewClicked() {\n      this.updatePersonToEdit({ role: 'user' })\n      this.modals.edit = true\n    },\n\n    updatePersonToEdit(person) {\n      this.personToEdit = {\n        ...person,\n        expiration_date: person.expiration_date\n          ? new Date(person.expiration_date)\n          : null\n      }\n    },\n\n    updateRoute() {\n      const search = this.searchField.getValue()\n      const department = this.selectedDepartment\n      const role = this.role\n      this.$router.push({ query: { search, department, role } })\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('bots.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search {\n  margin-top: 2em;\n}\n.query-list {\n  margin-top: 1.5rem;\n}\n.search-options {\n  align-items: flex-end;\n}\n.filter-button {\n  margin-top: 0.3em;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","timeMixin","AlertTriangleIcon","DateField","EyeIcon","EyeOffIcon","TextField","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_11","_createElementBlock","_normalizeClass","$props","_createElementVNode","_toDisplayString","_ctx","_openBlock","_Fragment","_createVNode","_component_alert_triangle_icon","_createTextVNode","_component_text_field","$data","_createBlock","_component_eye_off_icon","_component_eye_icon","_Transition","_withCtx","_hoisted_10","_createCommentVNode","$options","args","_cache","_withModifiers","_component_date_field","$event","searchMixin","ButtonSimple","ComboboxDepartment","ComboboxStyled","EditAvatarModal","EditPersonModal","HardDeleteModal","NewTokenModal","PageTitle","PeopleList","SearchField","mapGetters","people","person","personName","_a","mapActions","formData","form","action","access_token","err","_b","searchQuery","search","department","role","_component_page_title","_component_button_simple","_component_search_field","_component_combobox_department","_component_combobox_styled","_component_people_list","_component_edit_avatar_modal","_component_edit_person_modal","_component_new_token_modal","_component_hard_delete_modal"],"mappings":"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"}