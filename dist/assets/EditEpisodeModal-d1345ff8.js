import{m as a,Z as n,a as d,b as r,n as l}from"./TaskInfo-86bb07b0.js";import{a as m,K as c}from"./index-5e15805d.js";const f={name:"edit-episode-modal",mixins:[a],components:{ModalFooter:n,TextField:m,TextareaField:c},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},episodeToEdit:{type:Object,default:()=>{}}},data(){return this.episodeToEdit&&this.episodeToEdit.id?{form:{id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,production_id:this.episodeToEdit.project_id,data:this.episodeToEdit.data||{}},episodeSuccessText:""}:{form:{id:"",name:"",description:"",fps:"",data:{}},episodeSuccessText:""}},computed:{...d(["currentProduction","episodeMetadataDescriptors"])},methods:{...r([]),getDescriptorChoicesOptions(s){const e=s.choices.map(t=>({label:t,value:t}));return[{label:"",value:""},...e]},runConfirmation(){this.$emit("confirm",this.form)},isEditing(){return this.episodeToEdit&&this.episodeToEdit.id},resetForm(){this.episodeSuccessText="",this.isEditing()?this.form={id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,data:this.episodeToEdit.data||{}}:(this.form.id=null,this.form.name="",this.form.description="",this.form.data={})}},mounted(){this.resetForm()},watch:{active(){this.active&&this.resetForm()},episodeToEdit(){this.resetForm()}}};var p=function(){var e=this,t=e._self._c;return t("div",{class:{modal:!0,"is-active":e.active}},[t("div",{staticClass:"modal-background",on:{click:function(i){return e.$emit("cancel")}}}),t("div",{staticClass:"modal-content"},[t("div",{staticClass:"box"},[e.episodeToEdit&&this.episodeToEdit.id?t("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("episodes.edit_title"))+" "+e._s(e.episodeToEdit.name)+" ")]):t("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("episodes.new_episode"))+" ")]),t("form",{on:{submit:function(i){i.preventDefault()}}},[t("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("episodes.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(i){e.$set(e.form,"name",i)},expression:"form.name"}}),t("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("episodes.fields.description")},on:{keyup:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")||!i.ctrlKey?null:e.runConfirmation.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")||!i.metaKey?null:e.runConfirmation.apply(null,arguments)}]},model:{value:e.form.description,callback:function(i){e.$set(e.form,"description",i)},expression:"form.description"}}),e._l(e.episodeMetadataDescriptors,function(i){return t("div",{key:i.id},[i.choices.length>0?t("combobox",{attrs:{label:i.name,options:e.getDescriptorChoicesOptions(i)},model:{value:e.form.data[i.field_name],callback:function(o){e.$set(e.form.data,i.field_name,o)},expression:"form.data[descriptor.field_name]"}}):t("text-field",{attrs:{label:i.name},on:{enter:e.runConfirmation},model:{value:e.form.data[i.field_name],callback:function(o){e.$set(e.form.data,i.field_name,o)},expression:"form.data[descriptor.field_name]"}})],1)})],2),t("modal-footer",{attrs:{"error-text":e.$t("episodes.edit_error"),"is-loading":e.isLoading,"is-error":e.isError},on:{confirm:e.runConfirmation,cancel:function(i){return e.$emit("cancel")}}})],1)])])},u=[],_=l(f,p,u,!1,null,"225b9e5d",null,null);const v=_.exports;export{v as E};
