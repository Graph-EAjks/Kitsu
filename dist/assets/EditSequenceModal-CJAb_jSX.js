import{K as s,aU as o,M as r,O as a,N as d,m as c,n as l}from"./index-D6NT0KmE.js";const u={name:"edit-sequence-modal",mixins:[s],components:{MetadataField:o,ModalFooter:r,TextField:a,TextareaField:d},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},sequenceToEdit:{type:Object,default:()=>{}}},data(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",data:{resolution:""}},sequenceSuccessText:""}},computed:{...c(["sequenceMetadataDescriptors"])},methods:{runConfirmation(){this.confirmClicked()},confirmClicked(){this.$emit("confirm",this.form)},isEditing(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}}:(this.form.id=null,this.form.name="",this.form.description="",this.form.data={resolution:""})}},mounted(){this.active&&this.resetForm()},watch:{active(){this.resetForm()},sequenceToEdit(){this.resetForm()}}};var m=function(){var e=this,i=e._self._c;return i("div",{class:{modal:!0,"is-active":e.active}},[i("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),i("div",{staticClass:"modal-content"},[i("div",{staticClass:"box"},[e.sequenceToEdit&&e.sequenceToEdit.id?i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("sequences.edit_title"))+" "+e._s(e.sequenceToEdit.name)+" ")]):i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("sequences.new_sequence"))+" ")]),i("form",{on:{submit:function(t){t.preventDefault()}}},[i("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("sequences.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",typeof t=="string"?t.trim():t)},expression:"form.name"}}),i("text-field",{ref:"resolutionField",attrs:{label:e.$t("shots.fields.resolution")},on:{enter:e.runConfirmation},model:{value:e.form.data.resolution,callback:function(t){e.$set(e.form.data,"resolution",t)},expression:"form.data.resolution"}}),i("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("sequences.fields.description")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||!t.ctrlKey?null:e.runConfirmation.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||!t.metaKey?null:e.runConfirmation.apply(null,arguments)}]},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.sequenceMetadataDescriptors,function(t){return e.sequenceToEdit?i("metadata-field",{key:t.id,attrs:{descriptor:t,entity:e.sequenceToEdit},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(n){e.$set(e.form.data,t.field_name,n)},expression:"form.data[descriptor.field_name]"}}):e._e()})],2),i("modal-footer",{attrs:{"error-text":e.$t("sequences.edit_error"),"is-loading":e.isLoading,"is-error":e.isError},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},f=[],p=l(u,m,f,!1,null,"4e39457d");const _=p.exports;export{_ as E};
//# sourceMappingURL=EditSequenceModal-CJAb_jSX.js.map
