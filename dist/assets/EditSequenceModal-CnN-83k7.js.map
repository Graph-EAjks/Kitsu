{"version":3,"file":"EditSequenceModal-CnN-83k7.js","sources":["../../src/components/modals/EditSequenceModal.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\" v-if=\"sequenceToEdit && sequenceToEdit.id\">\n          {{ $t('sequences.edit_title') }} {{ sequenceToEdit.name }}\n        </h1>\n        <h1 class=\"title\" v-else>\n          {{ $t('sequences.new_sequence') }}\n        </h1>\n\n        <form @submit.prevent>\n          <text-field\n            ref=\"nameField\"\n            :label=\"$t('sequences.fields.name')\"\n            v-model.trim=\"form.name\"\n            @enter=\"runConfirmation\"\n            v-focus\n          />\n          <text-field\n            ref=\"resolutionField\"\n            :label=\"$t('shots.fields.resolution')\"\n            v-model=\"form.data.resolution\"\n            @enter=\"runConfirmation\"\n          />\n          <textarea-field\n            ref=\"descriptionField\"\n            :label=\"$t('sequences.fields.description')\"\n            @keyup.ctrl.enter=\"runConfirmation\"\n            @keyup.meta.enter=\"runConfirmation\"\n            v-model=\"form.description\"\n          />\n          <metadata-field\n            :key=\"descriptor.id\"\n            :descriptor=\"descriptor\"\n            :entity=\"sequenceToEdit\"\n            @enter=\"runConfirmation\"\n            v-model=\"form.data[descriptor.field_name]\"\n            v-for=\"descriptor in sequenceMetadataDescriptors\"\n            v-if=\"sequenceToEdit\"\n          />\n        </form>\n\n        <modal-footer\n          :error-text=\"$t('sequences.edit_error')\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isError\"\n          @confirm=\"runConfirmation\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport MetadataField from '@/components/widgets/MetadataField.vue'\nimport ModalFooter from '@/components/modals/ModalFooter.vue'\nimport TextField from '@/components/widgets/TextField.vue'\nimport TextareaField from '@/components/widgets/TextareaField.vue'\n\nexport default {\n  name: 'edit-sequence-modal',\n\n  mixins: [modalMixin],\n\n  components: {\n    MetadataField,\n    ModalFooter,\n    TextField,\n    TextareaField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    sequenceToEdit: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    if (this.sequenceToEdit && this.sequenceToEdit.id) {\n      return {\n        form: {\n          id: this.sequenceToEdit.id,\n          name: this.sequenceToEdit.name,\n          description: this.sequenceToEdit.description,\n          production_id: this.sequenceToEdit.project_id,\n          data:\n            {\n              ...this.sequenceToEdit.data,\n              resolution: this.sequenceToEdit.data.resolution || ''\n            } || {}\n        },\n        sequenceSuccessText: ''\n      }\n    } else {\n      return {\n        form: {\n          id: '',\n          name: '',\n          description: '',\n          data: {\n            resolution: ''\n          }\n        },\n        sequenceSuccessText: ''\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters(['sequenceMetadataDescriptors'])\n  },\n\n  methods: {\n    runConfirmation() {\n      this.confirmClicked()\n    },\n\n    confirmClicked() {\n      this.$emit('confirm', this.form)\n    },\n\n    isEditing() {\n      return this.sequenceToEdit && this.sequenceToEdit.id\n    },\n\n    resetForm() {\n      this.sequenceSuccessText = ''\n      if (!this.isEditing()) {\n        this.form.id = null\n        this.form.name = ''\n        this.form.description = ''\n        this.form.data = {\n          resolution: ''\n        }\n      } else {\n        this.form = {\n          id: this.sequenceToEdit.id,\n          name: this.sequenceToEdit.name,\n          description: this.sequenceToEdit.description,\n          data:\n            {\n              ...this.sequenceToEdit.data,\n              resolution: this.sequenceToEdit.data.resolution || ''\n            } || {}\n        }\n      }\n    }\n  },\n\n  mounted() {\n    if (this.active) {\n      this.resetForm()\n    }\n  },\n\n  watch: {\n    active() {\n      this.resetForm()\n    },\n\n    sequenceToEdit() {\n      this.resetForm()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content .box p.text {\n  margin-bottom: 1em;\n}\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n.info-message {\n  margin-top: 1em;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","MetadataField","ModalFooter","TextField","TextareaField","mapGetters"],"mappings":"mFAwEA,MAAAA,EAAA,CACA,KAAA,sBAEA,OAAA,CAAAC,CAAA,EAEA,WAAA,CACA,cAAAC,EACA,YAAAC,EACA,UAAAC,EACA,cAAAC,CACA,EAEA,MAAA,CACA,OAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,QAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,UAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,eAAA,CACA,KAAA,OACA,QAAA,IAAA,CAAA,CACA,CACA,EAEA,MAAA,CACA,OAAA,KAAA,gBAAA,KAAA,eAAA,GACA,CACA,KAAA,CACA,GAAA,KAAA,eAAA,GACA,KAAA,KAAA,eAAA,KACA,YAAA,KAAA,eAAA,YACA,cAAA,KAAA,eAAA,WACA,KACA,CACA,GAAA,KAAA,eAAA,KACA,WAAA,KAAA,eAAA,KAAA,YAAA,EACA,CACA,EACA,oBAAA,EACA,EAEA,CACA,KAAA,CACA,GAAA,GACA,KAAA,GACA,YAAA,GACA,KAAA,CACA,WAAA,EACA,CACA,EACA,oBAAA,EACA,CAEA,EAEA,SAAA,CACA,GAAAC,EAAA,CAAA,6BAAA,CAAA,CACA,EAEA,QAAA,CACA,iBAAA,CACA,KAAA,eAAA,CACA,EAEA,gBAAA,CACA,KAAA,MAAA,UAAA,KAAA,IAAA,CACA,EAEA,WAAA,CACA,OAAA,KAAA,gBAAA,KAAA,eAAA,EACA,EAEA,WAAA,CACA,KAAA,oBAAA,GACA,KAAA,YAQA,KAAA,KAAA,CACA,GAAA,KAAA,eAAA,GACA,KAAA,KAAA,eAAA,KACA,YAAA,KAAA,eAAA,YACA,KACA,CACA,GAAA,KAAA,eAAA,KACA,WAAA,KAAA,eAAA,KAAA,YAAA,EACA,CACA,GAhBA,KAAA,KAAA,GAAA,KACA,KAAA,KAAA,KAAA,GACA,KAAA,KAAA,YAAA,GACA,KAAA,KAAA,KAAA,CACA,WAAA,EACA,EAaA,CACA,EAEA,SAAA,CACA,KAAA,QACA,KAAA,UAAA,CAEA,EAEA,MAAA,CACA,QAAA,CACA,KAAA,UAAA,CACA,EAEA,gBAAA,CACA,KAAA,UAAA,CACA,CACA,CACA"}