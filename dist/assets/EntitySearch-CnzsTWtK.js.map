{"version":3,"file":"EntitySearch-CnzsTWtK.js","sources":["../../src/components/pages/EntitySearch.vue"],"sourcesContent":["<template>\n  <div class=\"entity-search page\">\n    <form class=\"search-form\" @submit.prevent=\"onResultSelected()\">\n      <div>\n        <combobox-production\n          class=\"flexrow-item production-field\"\n          :label=\"$t('main.production')\"\n          :production-list=\"productionList\"\n          v-model=\"productionId\"\n        />\n      </div>\n\n      <div class=\"search-field\">\n        <span class=\"search-icon\">\n          <search-icon :size=\"20\" />\n        </span>\n        <input\n          ref=\"search-field\"\n          class=\"input\"\n          :placeholder=\"$t('search.placeholder')\"\n          v-model.trim=\"searchQuery\"\n        />\n      </div>\n      <div class=\"search-options pa1 flexrow\">\n        <checkbox\n          class=\"flexrow-item\"\n          :toggle=\"true\"\n          :label=\"$t('assets.title')\"\n          @change=\"search\"\n          v-model=\"searchFilter.assets\"\n        />\n        <checkbox\n          class=\"flexrow-item\"\n          :toggle=\"true\"\n          :label=\"$t('shots.title')\"\n          @change=\"search\"\n          v-model=\"searchFilter.shots\"\n        />\n\n        <div class=\"filler\"></div>\n        <span class=\"flexrow-item no-margin\">\n          {{ $t('search.limit') }}\n        </span>\n        <combobox\n          class=\"search-limit flexrow-item\"\n          :options=\"limitOptions\"\n          :with-margin=\"false\"\n          @update:model-value=\"search\"\n          v-model=\"limit\"\n        />\n      </div>\n    </form>\n    <div class=\"search-results mb2\">\n      <div class=\"has-text-centered\" v-if=\"searchQuery.length < 3\">\n        {{ $t('main.search.type') }}\n      </div>\n      <div class=\"has-text-centered\" v-else-if=\"noSearchFilters\">\n        {{ $t('main.search.no_filter') }}\n      </div>\n      <div v-else-if=\"isLoading\">\n        <spinner />\n      </div>\n      <div v-else>\n        <div class=\"pb1\" v-if=\"searchFilter.assets\">\n          <h2 class=\"mt0\">\n            {{ $t('assets.title') }} ({{ results.assets?.length || 0 }})\n          </h2>\n          <div class=\"has-text-centered\" v-if=\"!results.assets?.length\">\n            {{ $t('main.search.no_result') }}\n          </div>\n          <div class=\"result-list\" v-else>\n            <div\n              class=\"result flexcolumn\"\n              :class=\"{\n                'selected-result': flattenResults[selectedIndex] === entity\n              }\"\n              :key=\"entity.id\"\n              @mouseover=\"selectResultById(entity.id)\"\n              v-for=\"entity in results.assets\"\n            >\n              <entity-preview\n                :empty-height=\"200\"\n                :empty-width=\"300\"\n                :height=\"200\"\n                :width=\"300\"\n                :entity=\"entity\"\n                is-rounded-top-border\n              />\n              <router-link\n                class=\"result-description\"\n                :id=\"`result-link-${entity.id}`\"\n                :to=\"entityPath(entity, 'asset')\"\n              >\n                <div class=\"production-name\">\n                  {{ entity.project_name }}\n                </div>\n                <div class=\"entity-name\">\n                  {{ entity.asset_type_name }} / {{ entity.name }}\n                </div>\n                <div class=\"match\">\n                  <span class=\"match-icon\">\n                    <search-icon :size=\"15\" />\n                  </span>\n                  {{ getMatchDetails(entity) }}\n                </div>\n              </router-link>\n            </div>\n          </div>\n          <p\n            class=\"has-text-centered mt2\"\n            v-if=\"\n              results.assets.length !== 0 && results.assets.length % 12 === 0\n            \"\n          >\n            <button\n              class=\"button is-link\"\n              @click=\"loadMoreResults('assets')\"\n              v-if=\"!isLoadingMoreAssets\"\n            >\n              {{ $t('main.load_more') }}\n            </button>\n            <spinner v-else />\n          </p>\n        </div>\n        <div class=\"pb1\" v-if=\"searchFilter.shots\">\n          <h2 class=\"mt1\">\n            {{ $t('shots.title') }} ({{ results.shots?.length || 0 }})\n          </h2>\n          <div class=\"has-text-centered\" v-if=\"!results.shots?.length\">\n            {{ $t('main.search.no_result') }}\n          </div>\n          <div class=\"result-list\" v-else>\n            <div\n              class=\"result flexcolumn\"\n              :class=\"{\n                'selected-result': flattenResults[selectedIndex] === entity\n              }\"\n              :key=\"entity.id\"\n              @mouseover=\"selectResultById(entity.id)\"\n              v-for=\"entity in results.shots\"\n            >\n              <entity-preview\n                :empty-height=\"200\"\n                :empty-width=\"300\"\n                :height=\"200\"\n                :width=\"300\"\n                :entity=\"entity\"\n                is-rounded-top-border\n              />\n              <router-link\n                class=\"result-description\"\n                :id=\"`result-link-${entity.id}`\"\n                :to=\"entityPath(entity, 'shot')\"\n              >\n                <div class=\"production-name\">\n                  {{ entity.project_name }}\n                </div>\n                <div class=\"entity-name\">\n                  <template v-if=\"entity.episode_name\">\n                    {{ entity.episode_name }} /\n                  </template>\n                  {{ entity.sequence_name }} / {{ entity.name }}\n                </div>\n                <div class=\"match\">\n                  <span class=\"match-icon\">\n                    <search-icon :size=\"15\" />\n                  </span>\n                  <span class=\"match-details\">{{\n                    getMatchDetails(entity)\n                  }}</span>\n                </div>\n              </router-link>\n            </div>\n          </div>\n          <p\n            class=\"has-text-centered mt2\"\n            v-if=\"results.shots.length !== 0 && results.shots.length % 12 === 0\"\n          >\n            <button\n              class=\"button is-link\"\n              @click=\"loadMoreResults('shots')\"\n              v-if=\"!isLoadingMoreShots\"\n            >\n              {{ $t('main.load_more') }}\n            </button>\n            <spinner v-else />\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/*\n * Page to allow wide search on every entities stored in the open projects.\n */\nimport { mapGetters, mapActions } from 'vuex'\nimport { getEntityPath, getPersonPath } from '@/lib/path'\n\nimport { SearchIcon } from 'lucide-vue-next'\nimport stringHelpers from '@/lib/string'\n\nimport Checkbox from '@/components/widgets/Checkbox.vue'\nimport Combobox from '@/components/widgets/Combobox.vue'\nimport ComboboxProduction from '@/components/widgets/ComboboxProduction.vue'\nimport EntityPreview from '@/components/widgets/EntityPreview.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\n\nconst AVAILABLE_LIMITS = [12, 24, 48]\n\nexport default {\n  name: 'entity-search',\n\n  components: {\n    Checkbox,\n    Combobox,\n    ComboboxProduction,\n    EntityPreview,\n    SearchIcon,\n    Spinner\n  },\n\n  data() {\n    return {\n      isLoading: false,\n      isLoadingMoreAssets: false,\n      isLoadingMoreShots: false,\n      limit: AVAILABLE_LIMITS[0],\n      limitOptions: AVAILABLE_LIMITS.map(value => ({ label: value, value })),\n      productionId: '',\n      selectedIndex: 0,\n      searchQuery: '',\n      searchFilter: {\n        assets: true,\n        shots: true,\n        persons: false\n      },\n      results: {\n        assets: [],\n        shots: [],\n        persons: []\n      }\n    }\n  },\n\n  mounted() {\n    window.addEventListener('keydown', event => {\n      if (\n        (event.ctrlKey || event.metaKey) &&\n        event.altKey &&\n        event.keyCode === 70\n      ) {\n        this.searchField?.focus()\n      } else if (event.keyCode === 40) {\n        this.selectNext()\n      } else if (event.keyCode === 38) {\n        this.selectPrevious()\n      }\n    })\n\n    if (this.$route.query.search) {\n      this.searchQuery = this.$route.query.search\n    }\n\n    this.searchField.focus()\n  },\n\n  computed: {\n    ...mapGetters(['openProductions', 'productionMap']),\n\n    searchField() {\n      return this.$refs['search-field']\n    },\n\n    flattenResults() {\n      let values = []\n      if (this.searchFilter.assets) {\n        values = values.concat(this.results.assets)\n      }\n      if (this.searchFilter.shots) {\n        values = values.concat(this.results.shots)\n      }\n      if (this.searchFilter.persons) {\n        values = values.concat(this.results.persons)\n      }\n      return values\n    },\n\n    noSearchFilters() {\n      return (\n        !this.searchFilter.assets && !this.searchFilter.shots\n        // && !this.searchFilter.persons\n      )\n    },\n\n    productionList() {\n      return [\n        {\n          id: '',\n          name: this.$t('main.all')\n        }\n      ].concat([...this.openProductions])\n    }\n  },\n\n  methods: {\n    ...mapActions(['searchData']),\n\n    search() {\n      this.isLoading = true\n      const index_names = Object.entries(this.searchFilter)\n        .map(([k, v]) => (v ? k : undefined))\n        .filter(Boolean)\n\n      this.searchData({\n        query: this.searchQuery,\n        limit: this.limit,\n        productionId: this.productionId,\n        index_names\n      })\n        .then(results => {\n          delete results.persons\n          this.results = results\n        })\n        .catch(console.error)\n        .finally(() => {\n          this.isLoading = false\n        })\n    },\n\n    loadMoreResults(indexName) {\n      const index_names = [indexName]\n      const loadingField = `isLoadingMore${stringHelpers.capitalize(indexName)}`\n      this[loadingField] = true\n\n      this.searchData({\n        query: this.searchQuery,\n        limit: this.limit,\n        offset: this.results[indexName].length,\n        productionId: this.productionId,\n        index_names\n      })\n        .then(results => {\n          this.results[indexName] = this.results[indexName].concat(\n            results[indexName]\n          )\n        })\n        .catch(console.error)\n        .finally(() => {\n          this[loadingField] = false\n        })\n    },\n\n    selectPrevious() {\n      this.selectedIndex--\n      if (this.selectedIndex < 0) {\n        this.selectedIndex = this.flattenResults.length - 1\n      }\n      this.scrollToSelection()\n    },\n\n    selectNext() {\n      this.selectedIndex++\n      if (this.selectedIndex >= this.flattenResults.length) {\n        this.selectedIndex = 0\n      }\n      this.scrollToSelection()\n    },\n\n    scrollToSelection() {\n      const item = this.flattenResults[this.selectedIndex]\n      if (item) {\n        document.getElementById(`result-link-${item.id}`).scrollIntoView(false)\n      }\n    },\n\n    selectResultById(id) {\n      this.selectedIndex = this.flattenResults.findIndex(item => item.id === id)\n    },\n\n    onResultSelected() {\n      const item = this.flattenResults[this.selectedIndex]\n      if (item) {\n        document.getElementById(`result-link-${item.id}`).click()\n      }\n    },\n\n    clearSearchResult() {\n      this.results = {\n        assets: [],\n        shots: [],\n        persons: []\n      }\n    },\n\n    entityPath(entity, section) {\n      const project = this.productionMap.get(entity.project_id)\n      const isTVShow = project.production_type === 'tvshow'\n      let episodeId = null\n      if (isTVShow) episodeId = entity.episode_id || 'main'\n      return getEntityPath(entity.id, entity.project_id, section, episodeId)\n    },\n\n    personPath(person) {\n      return getPersonPath(person.id)\n    },\n\n    getMatchDetails(entity) {\n      const target = entity.matched_terms.join(', ')\n      return this.$t('search.match_details', {\n        target\n      })\n    }\n  },\n\n  watch: {\n    productionId() {\n      this.search()\n    },\n\n    searchQuery() {\n      if (this.searchQuery.length) {\n        this.$router.push({ query: { search: this.searchQuery } })\n      } else {\n        this.$router.push({ query: {} })\n      }\n\n      if (this.searchQuery.length > 2) {\n        this.search()\n      } else {\n        this.clearSearchResult()\n      }\n\n      this.selectedIndex = 0\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('search.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mt0 {\n  margin-top: 0;\n}\n\n.search-form {\n  max-width: 800px;\n  margin: auto;\n}\n\n.search-field {\n  padding-top: 0;\n  position: relative;\n  width: 100%;\n\n  .input {\n    font-size: 1.3em;\n    border-radius: 10px;\n    padding-left: 40px;\n  }\n\n  .search-icon {\n    position: absolute;\n    color: $grey;\n    z-index: 4;\n    top: 17px;\n    left: 10px;\n  }\n}\n\n.production-field {\n  margin-bottom: 1em;\n  margin-top: 1em;\n}\n\n.search-options {\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 0 2em;\n\n  .search-filter {\n    gap: 2em;\n  }\n\n  .search-limit {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5em;\n  }\n}\n\n.search-results {\n  max-width: 1260px; // 300px * 4 + gap * 3\n  margin-left: auto;\n  margin-right: auto;\n\n  .result-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n  }\n\n  .result {\n    height: 300px;\n    background: var(--background);\n    border-radius: 1em;\n    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n\n    .dark & {\n      background: var(--background-alt);\n    }\n\n    &.selected-result {\n      background: var(--background-hover);\n    }\n\n    .result-description {\n      max-width: 300px;\n      color: var(--text-strong);\n      font-weight: bold;\n      padding: 0.3em 1em;\n\n      .production-name {\n        font-size: 0.9em;\n        text-transform: uppercase;\n        font-weight: 500;\n        color: var(--text);\n      }\n    }\n\n    .match {\n      display: inline-flex;\n      color: var(--text-alt);\n      font-weight: normal;\n      margin-top: 0.5em;\n      opacity: 0.7;\n\n      .match-icon {\n        margin-top: 2px;\n        margin-right: 0.5em;\n      }\n    }\n  }\n}\n</style>\n"],"names":["AVAILABLE_LIMITS","_sfc_main","Checkbox","Combobox","ComboboxProduction","EntityPreview","SearchIcon","Spinner","value","event","mapGetters","values","mapActions","index_names","k","v","results","indexName","loadingField","stringHelpers","item","id","entity","section","isTVShow","episodeId","getEntityPath","person","getPersonPath","target","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_13","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_23","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_openBlock","_createElementBlock","_createElementVNode","_cache","_withModifiers","$options","_createVNode","_component_combobox_production","_ctx","$data","$event","_component_search_icon","_component_checkbox","_toDisplayString","_component_combobox","_hoisted_8","_hoisted_9","_hoisted_10","_component_spinner","_hoisted_11","_hoisted_12","_hoisted_15","_Fragment","_renderList","_normalizeClass","_component_entity_preview","_component_router_link","_withCtx","_createTextVNode","_hoisted_14","_hoisted_21","_createBlock","_createCommentVNode","_hoisted_22","_hoisted_25","_hoisted_24","_hoisted_32"],"mappings":"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"}