import{_ as m,ao as h,m as g,a as _,a7 as b,B as k,r as d,c as i,o as r,e as c,t as l,f as u,d as x,bp as y,ab as B}from"./index-hEeDez_K.js";const P={name:"production-brief",components:{ButtonSimple:k,TextareaField:b},data(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:{..._(["currentProduction","isCurrentUserManager"]),textarea(){return this.$refs.textarea}},mounted(){var e;this.brief=(e=this.currentProduction)==null?void 0:e.description},methods:{...g(["editProduction"]),openEditing(){this.isCurrentUserManager&&(this.isEditing=!0,this.$nextTick(()=>{this.textarea.focus()}))},async editBrief(){this.isLoading=!0,this.errors.editBrief=!1;try{await this.editProduction({id:this.currentProduction.id,description:this.brief}),this.isEditing=!1}catch{this.errors.editBrief=!0}this.isLoading=!1},renderMarkdown:h}},v={class:"production-brief"},E={key:0},L=["innerHTML"],M={key:1,class:"box has-text-right"},C={key:0,class:"error mt1 has-text-right"};function V(e,n,w,T,t,s){var a;const f=d("textarea-field"),p=d("button-simple");return r(),i("div",v,[t.isEditing?(r(),i("div",M,[u(f,{class:"editor",ref:"textarea","input-class":"textarea",onKeyup:y(B(s.editBrief,["ctrl"]),["enter"]),modelValue:t.brief,"onUpdate:modelValue":n[1]||(n[1]=o=>t.brief=o)},null,8,["onKeyup","modelValue"]),t.errors.editBrief?(r(),i("p",C,l(e.$t("productions.brief.edit_error")),1)):x("",!0),c("p",null,[u(p,{"is-primary":!0,"is-loading":t.isLoading,disabled:t.isLoading,text:e.$t("main.save"),onClick:s.editBrief},null,8,["is-loading","disabled","text","onClick"])])])):(r(),i("div",{key:0,class:"box",onDblclick:n[0]||(n[0]=(...o)=>s.openEditing&&s.openEditing(...o))},[(a=e.currentProduction)!=null&&a.description?(r(),i("div",{key:1,class:"content",innerHTML:s.renderMarkdown(e.currentProduction.description)},null,8,L)):(r(),i("div",E,[c("p",null,l(e.$t("productions.brief.empty")),1)]))],32))])}const N=m(P,[["render",V],["__scopeId","data-v-a60df982"]]);export{N as P};
//# sourceMappingURL=ProductionBrief-Gsb8HN-y.js.map
