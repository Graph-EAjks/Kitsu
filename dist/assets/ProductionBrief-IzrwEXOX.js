import{B as m,a8 as h,m as g,b as _,aq as b,_ as k,r as d,o as i,c as r,e as c,t as l,f as u,bj as x,aa as y,d as B}from"./index-3_Pq_-EF.js";const P={name:"production-brief",components:{ButtonSimple:m,TextareaField:h},data(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:{...g(["currentProduction","isCurrentUserManager"]),textarea(){return this.$refs.textarea}},mounted(){var e;this.brief=(e=this.currentProduction)==null?void 0:e.description},methods:{..._(["editProduction"]),openEditing(){this.isCurrentUserManager&&(this.isEditing=!0,this.$nextTick(()=>{this.textarea.focus()}))},async editBrief(){this.isLoading=!0,this.errors.editBrief=!1;try{await this.editProduction({id:this.currentProduction.id,description:this.brief}),this.isEditing=!1}catch{this.errors.editBrief=!0}this.isLoading=!1},renderMarkdown:b}},v={class:"production-brief"},E={key:0},L=["innerHTML"],M={key:1,class:"box has-text-right"},C={key:0,class:"error mt1 has-text-right"};function V(e,n,w,T,t,s){var a;const f=d("textarea-field"),p=d("button-simple");return i(),r("div",v,[t.isEditing?(i(),r("div",M,[u(f,{class:"editor",ref:"textarea","input-class":"textarea",onKeyup:x(y(s.editBrief,["ctrl"]),["enter"]),modelValue:t.brief,"onUpdate:modelValue":n[1]||(n[1]=o=>t.brief=o)},null,8,["onKeyup","modelValue"]),t.errors.editBrief?(i(),r("p",C,l(e.$t("productions.brief.edit_error")),1)):B("",!0),c("p",null,[u(p,{"is-primary":!0,"is-loading":t.isLoading,disabled:t.isLoading,text:e.$t("main.save"),onClick:s.editBrief},null,8,["is-loading","disabled","text","onClick"])])])):(i(),r("div",{key:0,class:"box",onDblclick:n[0]||(n[0]=(...o)=>s.openEditing&&s.openEditing(...o))},[(a=e.currentProduction)!=null&&a.description?(i(),r("div",{key:1,class:"content",innerHTML:s.renderMarkdown(e.currentProduction.description)},null,8,L)):(i(),r("div",E,[c("p",null,l(e.$t("productions.brief.empty")),1)]))],32))])}const N=k(P,[["render",V],["__scopeId","data-v-a60df982"]]);export{N as P};
//# sourceMappingURL=ProductionBrief-IzrwEXOX.js.map
