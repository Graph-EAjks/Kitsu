{"version":3,"file":"ProductionQuota-DGt82juN.js","sources":["../../src/components/lists/QuotaShotList.vue","../../src/components/sides/PeopleQuotaInfo.vue","../../src/components/pages/quota/Quota.vue","../../src/components/pages/ProductionQuota.vue"],"sourcesContent":["<template>\n  <div class=\"data-list\">\n    <table class=\"details table\" v-if=\"!isLoading\">\n      <thead>\n        <tr>\n          <th>{{ $t('quota.details_name') }}</th>\n          <th>\n            {{\n              countMode === 'seconds'\n                ? $t('quota.details_seconds')\n                : $t('quota.details_frames')\n            }}\n          </th>\n          <th>{{ $t('quota.weight') }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr :key=\"`shot-quota-${shot.id}`\" v-for=\"shot in shots\">\n          <td>{{ shot.full_name }}</td>\n          <td>{{ getQuota(shot) }}</td>\n          <td>{{ shot.weight }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isLoadingError\" />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { frameToSeconds } from '@/lib/video'\n\nimport TableInfo from '@/components/widgets/TableInfo.vue'\n\nexport default {\n  name: 'quota-shot-list',\n\n  components: {\n    TableInfo\n  },\n\n  props: {\n    shots: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isLoadingError: {\n      type: Boolean,\n      default: false\n    },\n    countMode: {\n      type: String,\n      default: 'frames'\n    }\n  },\n\n  computed: {\n    ...mapGetters(['currentProduction'])\n  },\n\n  methods: {\n    getQuota(shot) {\n      if (this.countMode === 'seconds') {\n        return frameToSeconds(shot.nb_frames, this.currentProduction, shot)\n      } else {\n        return shot.nb_frames\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  header tr:hover {\n    background: transparent;\n  }\n\n  .table {\n    thead,\n    tbody tr:nth-child(odd) {\n      color: $white-grey;\n      background: #36393f;\n    }\n\n    tbody tr:nth-child(even) {\n      color: $white-grey;\n      background: #46494f;\n    }\n\n    thead th,\n    thead:hover {\n      color: $white-grey;\n      background: #36393f;\n      border-color: #666666;\n    }\n\n    tbody td {\n      border-color: #25282e;\n    }\n\n    tbody tr:hover {\n      color: $white-grey;\n      background: #5e6169;\n    }\n  }\n}\n\ntbody {\n  tr:nth-child(even) {\n    background: #f6f6f6;\n  }\n\n  tr:hover {\n    background: $light-green-lightest;\n  }\n}\n\n.name {\n  width: 300px;\n}\n</style>\n","<template>\n  <div class=\"people-timesheet-info\">\n    <div class=\"close\">\n      <router-link class=\"close-button\" :to=\"closeRoute\">\n        <x-icon />\n      </router-link>\n    </div>\n\n    <div class=\"flexrow\">\n      <people-avatar class=\"flexrow-item\" :person=\"person\" :is-lazy=\"false\" />\n      <page-title class=\"flexrow-item\" :text=\"person.full_name\" />\n    </div>\n\n    <div class=\"info-date\" v-if=\"isMonthInfo\">{{ monthString }} {{ year }}</div>\n    <div class=\"info-date\" v-else-if=\"isWeekInfo\">\n      {{ $t('main.week') }}\n      {{ week }}, {{ startDay }} - {{ endDay }} {{ weekMonth }} {{ year }}\n    </div>\n    <div class=\"info-date\" v-else-if=\"isDayInfo\">\n      {{ day }} {{ monthString }} {{ year }}\n    </div>\n\n    <quota-shot-list\n      class=\"time-spent-list\"\n      :count-mode=\"countMode\"\n      :shots=\"shots\"\n      :is-loading=\"isLoading\"\n      :is-error=\"isLoadingError\"\n    />\n  </div>\n</template>\n\n<script>\nimport { XIcon } from 'lucide-vue-next'\nimport moment from 'moment-timezone'\nimport { mapGetters } from 'vuex'\n\nimport { monthToString } from '@/lib/time'\n\nimport PageTitle from '@/components/widgets/PageTitle.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport QuotaShotList from '@/components/lists/QuotaShotList.vue'\n\nexport default {\n  name: 'people-quota-info',\n\n  components: {\n    XIcon,\n    PageTitle,\n    PeopleAvatar,\n    QuotaShotList\n  },\n\n  props: {\n    person: {\n      type: Object,\n      default: () => {}\n    },\n    year: {\n      type: Number,\n      default: 0\n    },\n    month: {\n      type: Number,\n      default: 0\n    },\n    week: {\n      type: Number,\n      default: 0\n    },\n    day: {\n      type: Number,\n      default: 0\n    },\n    countMode: {\n      type: String,\n      default: 'frames'\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isLoadingError: {\n      type: Boolean,\n      default: false\n    },\n    shots: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  emits: ['close'],\n\n  computed: {\n    ...mapGetters(['currentEpisode', 'currentProduction']),\n\n    startDay() {\n      return moment().day('Monday').year(this.year).week(this.week).date()\n    },\n\n    endDay() {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .add(6, 'days')\n        .date()\n    },\n\n    weekMonth() {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .format('MMM')\n    },\n\n    monthString() {\n      return monthToString(this.month)\n    },\n\n    isMonthInfo() {\n      return this.$route.path.indexOf('month') > 0\n    },\n\n    isWeekInfo() {\n      return this.$route.path.indexOf('week') > 0\n    },\n\n    isDayInfo() {\n      return this.$route.path.indexOf('day') > 0\n    },\n\n    closeRoute() {\n      if (!this.currentProduction) return {}\n      let route = {\n        name: 'quota',\n        production_id: this.currentProduction.id\n      }\n      if (this.isMonthInfo) {\n        route = {\n          name: 'quota-month',\n          params: {\n            year: this.year\n          }\n        }\n      } else if (this.isWeekInfo) {\n        route = {\n          name: 'quota-week',\n          params: {\n            year: this.year\n          }\n        }\n      } else if (this.isDayInfo) {\n        route = {\n          name: 'quota-day',\n          params: {\n            year: this.year,\n            month: this.month\n          }\n        }\n      }\n      if (this.currentEpisode) {\n        route.name = `episode-${route.name}`\n        route.params.episode_id = this.currentEpisode.id\n      }\n      return route\n    }\n  },\n\n  methods: {\n    onCloseClicked() {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .close-button:hover {\n  background: $dark-grey-lightest;\n}\n\n.data-list {\n  padding-bottom: 5em;\n}\n\n.people-timesheet-info {\n  border-left: 1px solid var(--border);\n  height: 100%;\n  padding: 1em;\n}\n\n.info-date {\n  font-size: 1.5em;\n  margin-top: 1em;\n  text-transform: capitalize;\n}\n\n.close {\n  text-align: right;\n}\n\n.close-button {\n  cursor: pointer;\n  display: inline-block;\n  text-align: center;\n  padding-top: 3px;\n  width: 30px;\n  height: 30px;\n}\n\n.close-button:hover {\n  display: inline-block;\n  background: $white-grey;\n  border-radius: 50%;\n}\n</style>\n","<template>\n  <div class=\"data-list\">\n    <div class=\"datatable-wrapper\" ref=\"body\">\n      <table class=\"datatable\">\n        <thead class=\"datatable-head\">\n          <tr>\n            <th\n              scope=\"col\"\n              class=\"name datatable-row-header\"\n              ref=\"rowHeaderName\"\n            >\n              {{ $t('quota.name') }}\n            </th>\n            <th\n              scope=\"col\"\n              class=\"average datatable-row-header\"\n              :style=\"{ left: averageColumnX }\"\n            >\n              {{ $t('quota.average') }}\n            </th>\n            <template v-if=\"detailLevel === 'month'\">\n              <th\n                scope=\"col\"\n                :key=\"'month-' + month\"\n                v-for=\"month in monthRange\"\n              >\n                {{ monthToString(month) }}\n              </th>\n            </template>\n            <template v-else-if=\"detailLevel === 'week'\">\n              <th scope=\"col\" :key=\"'week-' + week\" v-for=\"week in weekRange\">\n                {{ week }}\n              </th>\n            </template>\n            <template v-else-if=\"detailLevel === 'day'\">\n              <th scope=\"col\" :key=\"'day-' + day\" v-for=\"day in dayRange\">\n                {{ day }}\n              </th>\n            </template>\n          </tr>\n        </thead>\n        <tbody class=\"datatable-body\" v-if=\"quotaLength > 0 && !isLoading\">\n          <tr\n            class=\"datatable-row\"\n            v-for=\"key in filteredPersonIds\"\n            :key=\"'name-' + key\"\n          >\n            <th scope=\"row\" class=\"name datatable-row-header\">\n              <div class=\"flexrow\">\n                <people-avatar :size=\"30\" :person=\"personMap.get(key)\" />\n                {{ personMap.get(key).full_name }}\n              </div>\n            </th>\n            <td\n              class=\"average datatable-row-header\"\n              :style=\"{ left: averageColumnX }\"\n            >\n              <template\n                v-if=\"detailLevel === 'month' || detailLevel === 'week'\"\n              >\n                {{ getQuotaAverage(key, { year }) }}\n              </template>\n              <template v-else-if=\"detailLevel === 'day'\">\n                {{ getQuotaAverage(key, { year, month }) }}\n              </template>\n            </td>\n            <template v-if=\"detailLevel === 'month'\">\n              <td\n                :class=\"{\n                  selected: isMonthSelected(key, year, month),\n                  'quota-low': isMonthQuotaLow(key, year, month)\n                }\"\n                :key=\"'month-' + month\"\n                v-for=\"month in monthRange\"\n              >\n                <router-link\n                  class=\"quota-button\"\n                  :to=\"\n                    episodifyRoute({\n                      name: 'quota-month-person',\n                      params: {\n                        person_id: key,\n                        year: year,\n                        month: month\n                      },\n                      query: {\n                        countMode: countMode,\n                        computeMode: computeMode,\n                        taskTypeId: taskTypeId\n                      }\n                    })\n                  \"\n                  v-if=\"getQuota(key, { year, month })\"\n                >\n                  {{\n                    countMode === 'seconds'\n                      ? getQuota(key, { year, month }).toFixed(2)\n                      : getQuota(key, { year, month })\n                  }}\n                </router-link>\n                <span v-else>-</span>\n              </td>\n            </template>\n            <template v-else-if=\"detailLevel === 'week'\">\n              <td\n                :class=\"{\n                  selected: isWeekSelected(key, year, week),\n                  'quota-low': isWeekQuotaLow(key, year, month)\n                }\"\n                :key=\"'week-' + week\"\n                v-for=\"week in weekRange\"\n              >\n                <router-link\n                  class=\"quota-button\"\n                  :to=\"\n                    episodifyRoute({\n                      name: 'quota-week-person',\n                      params: {\n                        person_id: key,\n                        year: year,\n                        week: week\n                      },\n                      query: {\n                        countMode: countMode,\n                        computeMode: computeMode,\n                        taskTypeId: taskTypeId\n                      }\n                    })\n                  \"\n                  v-if=\"getQuota(key, { year, week })\"\n                >\n                  {{\n                    countMode === 'seconds'\n                      ? getQuota(key, { year, week }).toFixed(2)\n                      : getQuota(key, { year, week })\n                  }}\n                </router-link>\n                <span v-else> - </span>\n              </td>\n            </template>\n            <template v-else-if=\"detailLevel === 'day'\">\n              <td\n                :class=\"{\n                  weekend: isWeekend(year, month, day),\n                  selected: isDaySelected(key, year, month, day),\n                  'quota-low': isDayQuotaLow(key, year, month, day)\n                }\"\n                :key=\"'day-' + day\"\n                v-for=\"day in dayRange\"\n              >\n                <router-link\n                  class=\"quota-button\"\n                  :to=\"\n                    episodifyRoute({\n                      name: 'quota-day-person',\n                      params: {\n                        person_id: key,\n                        year: year,\n                        month: month,\n                        day: day\n                      },\n                      query: {\n                        countMode: countMode,\n                        computeMode: computeMode,\n                        taskTypeId: taskTypeId\n                      }\n                    })\n                  \"\n                  v-if=\"getQuota(key, { year, month, day })\"\n                >\n                  {{\n                    countMode === 'seconds'\n                      ? getQuota(key, { year, month, day }).toFixed(2)\n                      : getQuota(key, { year, month, day })\n                  }}\n                </router-link>\n                <span v-else> - </span>\n              </td>\n            </template>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div\n      class=\"has-text-centered empty-quota\"\n      v-if=\"quotaLength === 0 && !isLoading\"\n    >\n      <p class=\"info\">{{ $t('quota.no_quota') }}</p>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n  </div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { buildNameIndex, indexSearch } from '@/lib/indexing'\nimport { episodifyRoute } from '@/lib/path'\nimport {\n  monthToString,\n  getMonthRange,\n  getWeekRange,\n  getDayRange\n} from '@/lib/time'\n\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\n\nexport default {\n  name: 'quota',\n\n  components: {\n    PeopleAvatar,\n    TableInfo\n  },\n\n  props: {\n    taskTypeId: {\n      type: String,\n      required: true\n    },\n    detailLevel: {\n      type: String,\n      default: 'day',\n      required: true\n    },\n    countMode: {\n      type: String,\n      default: 'frames',\n      required: true\n    },\n    computeMode: {\n      type: String,\n      default: 'weighted',\n      required: true\n    },\n    year: {\n      type: Number,\n      default: 0\n    },\n    month: {\n      type: Number,\n      default: 0\n    },\n    week: {\n      type: Number,\n      default: 0\n    },\n    day: {\n      type: Number,\n      default: 0\n    },\n    searchText: {\n      type: String,\n      default: ''\n    },\n    maxQuota: {\n      default: 0\n    }\n  },\n\n  data() {\n    return {\n      currentMonth: moment().month() + 1,\n      currentYear: moment().year(),\n      currentWeek: moment().week(),\n      detailsTitle: '',\n      detailsMap: {},\n      isPanelShown: false,\n      isLoading: true,\n      isError: false,\n      personIds: [],\n      quotaMap: {},\n      quotaLength: 0,\n      selected: undefined,\n      averageColumnX: '12rem'\n    }\n  },\n\n  mounted() {\n    if (this.shotMap.size < 2) {\n      this.isLoading = true\n      setTimeout(() => {\n        this.loadShots(err => {\n          if (!err) {\n            this.loadData()\n          }\n        })\n      }, 100)\n    } else {\n      if (!this.isShotsLoading) this.isLoading = false\n      this.loadData()\n    }\n  },\n\n  computed: {\n    ...mapGetters(['currentEpisode', 'isShotsLoading', 'shotMap', 'personMap']),\n\n    monthRange() {\n      return getMonthRange(this.year, this.currentYear, this.currentMonth)\n    },\n\n    dayRange() {\n      return getDayRange(\n        this.year,\n        this.month,\n        this.currentYear,\n        this.currentMonth\n      )\n    },\n\n    weekRange() {\n      return getWeekRange(this.year, this.currentYear, this.currentWeek)\n    },\n\n    filteredPersonIds() {\n      let personIds = this.personIds\n      if (this.searchText.length > 0) {\n        personIds = indexSearch(\n          this.personIndex,\n          this.searchText.split(' ')\n        ).map(person => person.id)\n      }\n      return personIds\n    }\n  },\n\n  methods: {\n    ...mapActions(['loadShots', 'computeQuota', 'getPeriodDetails']),\n\n    episodifyRoute(route) {\n      if (this.currentEpisode) {\n        episodifyRoute(route, this.currentEpisode.id)\n      }\n      return route\n    },\n\n    isWeekend(year, month, day) {\n      let date = moment(`${year}-${month}-${day}`, 'YYYY-MM-DD')\n      if (day < 10) date = moment(`${year}-${month}-0${day}`, 'YYYY-MM-DD')\n      return [0, 6].includes(date.day())\n    },\n\n    loadData() {\n      if (this.taskTypeId) {\n        this.isLoading = true\n        this.computeQuota({\n          taskTypeId: this.taskTypeId,\n          detailLevel: this.detailLevel,\n          countMode: this.countMode,\n          computeMode: this.computeMode\n        }).then(quotas => {\n          this.quotaMap = quotas\n          this.quotaLength = Object.keys(this.quotaMap).length\n          this.calcAverageColumnX()\n          this.$nextTick(() => {\n            this.isLoading = false\n          })\n        })\n      }\n    },\n\n    loadDetails(personId, dateString) {\n      this.loadShots(err => {\n        this.isLoading = true\n        if (err) {\n          console.error(err)\n        } else {\n          if (this.taskTypeId) {\n            this.getPeriodDetails({\n              taskTypeId: this.taskTypeId,\n              detailLevel: this.detailLevel,\n              personId,\n              dateString\n            }).then(shots => {\n              this.detailsMap = shots\n            })\n          }\n        }\n      })\n    },\n    monthToString,\n\n    dateDigit(date) {\n      return date.toString().padStart(2, '0')\n    },\n\n    getQuota(personId, opt = {}) {\n      if (opt.day) {\n        const dayKey = `${opt.year}-${this.dateDigit(\n          opt.month\n        )}-${this.dateDigit(opt.day)}`\n        return this.quotaMap[personId].day[this.countMode][dayKey]\n      } else if (opt.week) {\n        const weekKey = `${opt.year}-${opt.week}`\n        return this.quotaMap[personId].week[this.countMode][weekKey]\n      } else {\n        const monthKey = `${opt.year}-${this.dateDigit(opt.month)}`\n        return this.quotaMap[personId].month[this.countMode][monthKey]\n      }\n    },\n\n    getQuotaAverage(personId, opt = {}) {\n      let average = 0\n      let total = 0\n      let nbEntries\n      if (this.detailLevel === 'day') {\n        const monthKey = `${opt.year}-${this.dateDigit(opt.month)}`\n        total = this.quotaMap[personId].month[this.countMode][monthKey]\n        nbEntries = this.quotaMap[personId].day.entries[monthKey]\n      } else if (this.detailLevel === 'week') {\n        const yearKey = opt.year\n        total = this.quotaMap[personId].year[this.countMode][yearKey]\n        nbEntries = this.quotaMap[personId].week.entries[yearKey]\n      } else if (this.detailLevel === 'month') {\n        const yearKey = opt.year\n        total = this.quotaMap[personId].year[this.countMode][yearKey]\n        nbEntries = this.quotaMap[personId].month.entries[yearKey]\n      }\n      average = total / nbEntries\n      return average ? average.toFixed(2) : '-'\n    },\n\n    isDaySelected(personId, year, month, day) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        '' + this.$route.params.year === '' + year &&\n        '' + this.$route.params.month === '' + month &&\n        '' + this.$route.params.day === '' + day\n      )\n    },\n\n    isWeekSelected(personId, year, week) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        '' + this.$route.params.year === '' + year &&\n        '' + this.$route.params.week === '' + week\n      )\n    },\n\n    isMonthSelected(personId, year, month) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        '' + this.$route.params.year === '' + year &&\n        '' + this.$route.params.month === '' + month\n      )\n    },\n\n    isDayQuotaLow(personId, year, month, day) {\n      const quota = this.getQuota(personId, { year, month, day })\n      return quota !== null && this.maxQuota > quota\n    },\n\n    isWeekQuotaLow(personId, year, week) {\n      return this.maxQuota > this.getQuota(personId, { year, week })\n    },\n\n    isMonthQuotaLow(personId, year, month) {\n      return this.maxQuota > this.getQuota(personId, { year, month })\n    },\n\n    calcAverageColumnX() {\n      if (this.quotaLength > 0) {\n        this.averageColumnX = `${this.$refs.rowHeaderName.offsetWidth}px`\n      }\n    },\n\n    resetPersonIds() {\n      const personIds = Object.keys(this.quotaMap)\n      const persons = personIds.map(pId => this.personMap.get(pId))\n      this.personIndex = buildNameIndex(persons)\n      this.personIds = personIds.sort((a, b) => {\n        const personAName = this.personMap.get(a).full_name\n        const personBName = this.personMap.get(b).full_name\n        return personAName.localeCompare(personBName)\n      })\n    }\n  },\n\n  watch: {\n    $route() {\n      const els = document.getElementsByClassName('selected')\n      if (els.length === 0) {\n        // selected element is not visible\n        setTimeout(() => {\n          this.$refs.body.scrollLeft += 380\n        }, 100)\n      }\n    },\n\n    computeMode() {\n      if (this.taskTypeId) {\n        this.loadData()\n      }\n    },\n\n    quotaMap() {\n      this.resetPersonIds()\n    },\n\n    taskTypeId() {\n      if (this.taskTypeId) {\n        this.loadData()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .weekend {\n    background-color: $dark-grey;\n  }\n  .quota-button:hover {\n    color: #333;\n  }\n  .info {\n    color: $white;\n  }\n}\n\n.data-list {\n  margin-top: 0;\n}\n\n.datatable-wrapper {\n  overflow: auto;\n  margin-bottom: 1rem;\n}\n\n.datatable {\n  min-width: auto;\n  .name {\n    min-width: 12rem;\n    text-align: left;\n    justify-content: flex-start;\n    .avatar {\n      margin-right: 0.5rem;\n    }\n  }\n  .average {\n    width: 8rem;\n  }\n  th,\n  td {\n    text-align: center;\n  }\n}\n\n.datatable-head th {\n  min-width: 4rem;\n}\n\n.datatable-body th {\n  padding: 1rem;\n}\n\n.datatable-body {\n  th,\n  td {\n    border: 0;\n  }\n}\n\n.quota-low {\n  color: red;\n}\n\n.quota-button {\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  color: inherit;\n  font-size: inherit;\n  &:hover,\n  &:focus,\n  &.is-selected {\n    background-color: $dark-grey-lightest;\n  }\n}\n\n.empty-quota {\n  width: 100%;\n}\n\n.selected .quota-button {\n  background: $purple;\n  color: #333;\n}\n\n.quota-button:hover {\n  background: #bbeebb;\n}\n\n.weekend {\n  background-color: $white-grey;\n}\n</style>\n","<template>\n  <div class=\"columns fixed-page\">\n    <div class=\"column main-column\">\n      <div class=\"flexrow filters\">\n        <div class=\"flexrow-item\">\n          <combobox-task-type\n            class=\"flexrow-item\"\n            :label=\"$t('quota.type_label')\"\n            :task-type-list=\"productionShotTaskTypes\"\n            v-model=\"taskTypeId\"\n          />\n        </div>\n        <div class=\"flexrow-item\">\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('quota.detail_label')\"\n            :options=\"detailLevelOptions\"\n            v-model=\"detailLevelString\"\n          />\n        </div>\n\n        <combobox\n          class=\"flexrow-item\"\n          :label=\"$t('quota.month_label')\"\n          :options=\"monthOptions\"\n          v-model=\"monthString\"\n          v-if=\"detailLevelString === 'day'\"\n        />\n\n        <combobox\n          class=\"flexrow-item\"\n          :label=\"$t('quota.year_label')\"\n          :options=\"yearOptions\"\n          v-model=\"yearString\"\n        />\n\n        <div class=\"flexrow-item\">\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('quota.count_label')\"\n            :options=\"countModeOptions\"\n            v-model=\"countMode\"\n          />\n        </div>\n        <combobox\n          class=\"flexrow-item\"\n          :label=\"$t('quota.compute_mode')\"\n          :options=\"computeModeOptions\"\n          v-model=\"computeMode\"\n        />\n        <div class=\"flexrow-item\">\n          <info-question-mark\n            class=\"mt2\"\n            :text=\"$t('quota.explanation_' + computeMode)\"\n          />\n        </div>\n        <div class=\"filler\"></div>\n        <button-simple\n          class=\"flexrow-item\"\n          :title=\"$t('quota.export_quotas')\"\n          icon=\"download\"\n          @click=\"exportQuotas\"\n        />\n      </div>\n\n      <div class=\"flexrow mb2 mt0\">\n        <search-field\n          ref=\"search-field\"\n          class=\"search-field flexrow-item\"\n          @change=\"onSearchChange\"\n        />\n\n        <span class=\"label flexrow-item\">\n          {{ $t('quota.highlight_quotas') }}\n        </span>\n\n        <text-field\n          class=\"flexrow-item max-quota-input\"\n          type=\"number\"\n          v-model=\"maxQuota\"\n        />\n      </div>\n\n      <quota\n        ref=\"quota-list\"\n        :task-type-id=\"taskTypeId\"\n        :detail-level=\"detailLevelString\"\n        :year=\"currentYear\"\n        :month=\"currentMonth\"\n        :week=\"currentWeek\"\n        :day=\"currentDay\"\n        :current-person=\"currentPerson\"\n        :count-mode=\"currentMode\"\n        :compute-mode=\"computeMode\"\n        :search-text=\"searchText\"\n        :max-quota=\"maxQuota\"\n      />\n    </div>\n    <div class=\"column side-column\" v-if=\"showInfo && currentPerson\">\n      <people-quota-info\n        :person=\"currentPerson\"\n        :year=\"currentYear\"\n        :month=\"currentMonth\"\n        :week=\"currentWeek\"\n        :day=\"currentDay\"\n        :is-loading=\"isPersonShotsLoading\"\n        :is-loading-error=\"false\"\n        :shots=\"personShots\"\n        :count-mode=\"countMode\"\n        @close=\"hideSideInfo\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport csv from '@/lib/csv'\nimport stringHelpers from '@/lib/string'\n\nimport { monthToString, range } from '@/lib/time'\nimport { episodifyRoute } from '@/lib/path'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport Combobox from '@/components/widgets/Combobox.vue'\nimport ComboboxTaskType from '@/components/widgets/ComboboxTaskType.vue'\nimport InfoQuestionMark from '@/components/widgets/InfoQuestionMark.vue'\nimport PeopleQuotaInfo from '@/components/sides/PeopleQuotaInfo.vue'\nimport Quota from '@/components/pages/quota/Quota.vue'\nimport SearchField from '@/components/widgets/SearchField.vue'\nimport TextField from '@/components/widgets/TextField.vue'\n\nexport default {\n  name: 'production-quota',\n\n  components: {\n    ButtonSimple,\n    Combobox,\n    ComboboxTaskType,\n    InfoQuestionMark,\n    PeopleQuotaInfo,\n    Quota,\n    SearchField,\n    TextField\n  },\n\n  data() {\n    return {\n      taskTypeId: '',\n      countMode: 'frames',\n      countModeOptions: [\n        { label: this.$t('quota.frames'), value: 'frames' },\n        { label: this.$t('quota.seconds'), value: 'seconds' },\n        { label: this.$t('quota.count'), value: 'count' }\n      ],\n      detailLevelOptions: [\n        { label: this.$t('quota.day'), value: 'day' },\n        { label: this.$t('quota.week'), value: 'week' },\n        { label: this.$t('quota.month'), value: 'month' }\n      ],\n      computeModeOptions: [\n        { label: this.$t('quota.weighted'), value: 'weighted' },\n        { label: this.$t('quota.feedback_date'), value: 'feedback' },\n        { label: this.$t('quota.weighted_done'), value: 'weighteddone' },\n        { label: this.$t('quota.done_date'), value: 'done' }\n      ],\n      computeMode: 'weighted',\n      currentYear: moment().year(),\n      currentMonth: moment().month() + 1,\n      currentWeek: moment().week(),\n      currentDay: moment().date(),\n      currentPerson: this.getCurrentPerson(),\n      currentMode: 'frames',\n\n      detailLevelString: 'day',\n      detailLevel: 'day',\n\n      isLoading: false,\n      isLoadingError: false,\n      isPersonShotsLoading: false,\n      maxQuota: 0,\n      monthString: `${moment().month() + 1}`,\n\n      personShots: [],\n      searchText: '',\n      showInfo: false,\n      yearString: `${moment().year()}`\n    }\n  },\n\n  mounted() {\n    this.loadRoute()\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'productionShotTaskTypes',\n      'shotTaskTypes',\n      'personMap'\n    ]),\n\n    yearOptions() {\n      const year = 2018\n      const currentYear = moment().year()\n      return range(year, currentYear).map(year => ({\n        label: year,\n        value: `${year}`\n      }))\n    },\n\n    monthOptions() {\n      const currentYear = `${moment().year()}`\n      const month = 1\n      const currentMonth = moment().month() + 1\n      let monthRange = range(month, 12)\n      if (currentYear === this.yearString) {\n        monthRange = range(month, currentMonth)\n      }\n      return monthRange.map(month => ({\n        label: monthToString(month),\n        value: `${month}`\n      }))\n    }\n  },\n\n  methods: {\n    ...mapActions(['getPersonQuotaShots', 'loadShots']),\n\n    getCurrentPerson() {\n      const personId = this.$route.params.person_id\n      if (personId && this.personMap) {\n        return this.personMap.get(personId)\n      } else {\n        return {}\n      }\n    },\n\n    loadRoute() {\n      const { month, year, week, day } = this.$route.params\n      const { countMode, taskTypeId, computeMode } = this.$route.query\n\n      if (this.$route.path.indexOf('week') > 0) this.detailLevel = 'week'\n      if (this.$route.path.indexOf('month') > 0) this.detailLevel = 'month'\n      if (this.$route.path.indexOf('day') > 0) this.detailLevel = 'day'\n\n      this.currentPerson = this.getCurrentPerson()\n      this.detailLevelString = this.detailLevel\n      if (countMode) {\n        this.countMode = countMode\n        this.currentMode = this.countMode\n      }\n      if (taskTypeId) {\n        this.taskTypeId = taskTypeId\n      } else {\n        const key = `quota:${this.currentProduction.id}:task-type-id`\n        this.taskTypeId = localStorage.getItem(key) || this.shotTaskTypes[0].id\n      }\n      if (computeMode) {\n        this.computeMode = computeMode\n      }\n      if (month) {\n        this.currentMonth = Number(month)\n        this.monthString = `${month}`\n      }\n      if (year) {\n        this.currentYear = Number(year)\n        this.yearString = `${year}`\n      }\n      if (week) {\n        this.currentWeek = Number(week)\n        this.weekString = `${week}`\n      }\n      if (day) {\n        this.currentDay = Number(day)\n      }\n\n      if (this.$route.path.indexOf('person') > 0) {\n        this.isPersonShotsLoading = true\n        this.getPersonQuotaShots({\n          personId: this.currentPerson.id,\n          detailLevel: this.detailLevel,\n          taskTypeId: this.taskTypeId,\n          year,\n          month,\n          week,\n          day,\n          computeMode: this.computeMode\n        }).then(shots => {\n          this.isPersonShotsLoading = false\n          this.personShots = shots\n          this.showSideInfo()\n        })\n      } else {\n        this.hideSideInfo()\n      }\n    },\n\n    showSideInfo() {\n      this.showInfo = true\n    },\n\n    hideSideInfo() {\n      this.showInfo = false\n    },\n\n    episodifyRoute(route) {\n      if (this.currentEpisode) {\n        episodifyRoute(route, this.currentEpisode.id)\n      }\n      return route\n    },\n\n    exportQuotas() {\n      const quotas = this.$refs['quota-list'].quotaMap\n\n      const nameData = ['quotas', this.detailLevel, this.currentYear]\n      if (this.detailLevel === 'day') nameData.push(this.currentMonth)\n      const name = stringHelpers.slugify(nameData.join('_'))\n      const people = Object.keys(quotas)\n        .map(personId => this.personMap.get(personId))\n        .sort((a, b) =>\n          a.full_name.localeCompare(b.full_name, undefined, {\n            numeric: true\n          })\n        )\n      csv.generateQuotas(\n        name,\n        quotas,\n        people,\n        this.countMode,\n        this.detailLevel,\n        moment().year(),\n        moment().month() + 1,\n        this.currentYear,\n        this.currentMonth,\n        this.currentWeek\n      )\n    },\n\n    resetRouteQuery() {\n      this.$router.push({\n        query: {\n          countMode: this.countMode,\n          computeMode: this.computeMode,\n          taskTypeId: this.taskTypeId\n        }\n      })\n    },\n\n    onSearchChange(searchText) {\n      this.searchText = searchText\n    }\n  },\n\n  watch: {\n    detailLevelString() {\n      if (this.detailLevel !== this.detailLevelString) {\n        const route = {\n          name: `quota-${this.detailLevelString}`,\n          params: {\n            year: this.currentYear\n          },\n          query: {\n            countMode: this.countMode,\n            computeMode: this.computeMode\n          }\n        }\n        if (this.detailLevelString === 'day') {\n          route.params.month = this.currentMonth\n        }\n        this.$router.push(this.episodifyRoute(route))\n      }\n    },\n\n    yearString() {\n      const year = Number(this.yearString)\n      const currentMonth = moment().month() + 1\n      if (this.currentYear !== year) {\n        const route = {\n          name: `quota-${this.detailLevelString}`,\n          params: {\n            year: year\n          },\n          query: {\n            countMode: this.countMode,\n            computeMode: this.computeMode\n          }\n        }\n        if (this.detailLevelString === 'day') {\n          route.params.month = `${Math.min(\n            Number(this.monthString),\n            currentMonth\n          )}`\n        }\n        this.$router.push(this.episodifyRoute(route))\n      }\n    },\n\n    monthString() {\n      if (this.currentMonth !== Number(this.monthString)) {\n        const route = {\n          name: 'quota-day',\n          params: {\n            year: this.currentYear,\n            month: Number(this.monthString)\n          },\n          query: {\n            countMode: this.countMode,\n            computeMode: this.computeMode,\n            taskTypeId: this.taskTypeId\n          }\n        }\n        this.$router.push(this.episodifyRoute(route))\n      }\n    },\n\n    countMode() {\n      if (this.currentMode !== this.countMode) {\n        if (this.$route.query.countMode !== this.countMode) {\n          this.resetRouteQuery()\n          this.currentMode = this.countMode\n        }\n      }\n    },\n\n    computeMode() {\n      if (this.$route.query.computeMode !== this.computeMode) {\n        this.resetRouteQuery()\n        this.currentPerson = null\n      }\n    },\n\n    taskTypeId() {\n      const key = `quota:${this.currentProduction.id}:task-type-id`\n      localStorage.setItem(key, this.taskTypeId)\n      if (this.$route.query.taskTypeId !== this.taskTypeId) {\n        this.resetRouteQuery()\n      }\n    },\n\n    currentProduction() {\n      this.isLoading = true\n      this.loadShots(() => {\n        this.loadRoute()\n        this.isLoading = false\n      })\n    },\n\n    currentEpisode() {\n      this.isLoading = true\n      this.loadShots(() => {\n        this.loadRoute()\n        this.isLoading = false\n      })\n    },\n\n    $route() {\n      this.loadRoute()\n    }\n  },\n\n  head() {\n    const prodName = this.currentProduction.name\n    return {\n      title: `${prodName} | ${this.$t('quota.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .filters {\n    color: $white-grey;\n  }\n}\n\n.filters {\n  padding-bottom: 2rem;\n\n  .field {\n    padding-bottom: 0;\n    margin-bottom: 0;\n  }\n\n  .overall-man-days {\n    width: 120px;\n    font-size: 0.9em;\n    margin-right: 1em;\n  }\n}\n\n.fixed-page {\n  padding-top: 60px;\n  padding-left: 2em;\n}\n\n.main-column {\n  border: 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding-top: 2em;\n  padding-right: 2em;\n}\n\n.zoom-level {\n  margin-top: -10px;\n}\n\n.side-column {\n  border-left: 1px solid var(--border);\n  padding: 0;\n  margin: 0;\n}\n\n.search-field {\n  color: var(--text);\n}\n\n.label {\n  font-weight: 300;\n  color: var(--text);\n}\n\n.max-quota-input {\n  width: 80px;\n}\n</style>\n"],"names":["_sfc_main","TableInfo","mapGetters","shot","frameToSeconds","_hoisted_1","_openBlock","_createElementBlock","$props","_createCommentVNode","_hoisted_2","_createElementVNode","_ctx","_Fragment","_renderList","_toDisplayString","$options","_createVNode","_component_table_info","XIcon","PageTitle","PeopleAvatar","QuotaShotList","moment","monthToString","route","_hoisted_3","_component_router_link","_withCtx","_component_x_icon","_component_people_avatar","_component_page_title","_hoisted_4","_hoisted_5","_hoisted_6","_component_quota_shot_list","err","getMonthRange","getDayRange","getWeekRange","personIds","indexSearch","person","mapActions","episodifyRoute","year","month","day","date","quotas","personId","dateString","shots","opt","dayKey","weekKey","monthKey","average","total","nbEntries","yearKey","week","quota","persons","pId","buildNameIndex","a","b","personAName","personBName","_hoisted_7","_hoisted_12","_normalizeStyle","$data","key","_createTextVNode","_normalizeClass","_createBlock","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","ButtonSimple","Combobox","ComboboxTaskType","InfoQuestionMark","PeopleQuotaInfo","Quota","SearchField","TextField","currentYear","range","currentMonth","monthRange","countMode","taskTypeId","computeMode","nameData","name","stringHelpers","people","csv","searchText","_component_combobox_task_type","_cache","$event","_component_combobox","_component_info_question_mark","_component_button_simple","_component_search_field","_component_text_field","_component_quota","_component_people_quota_info"],"mappings":"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"}