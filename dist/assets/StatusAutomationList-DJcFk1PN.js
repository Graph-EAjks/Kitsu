import{s as f,ag as g,a1 as b,T as v,y as S,m as T,b as $,_ as w,r as l,o,c as n,e as s,t as a,F as C,g as B,f as c,d as E,l as m}from"./index-CexEwSxF.js";import{T as D}from"./TaskStatusCell-hfpNl0bj.js";const L={name:"status-automation-list",mixins:[f],components:{AlertTriangleIcon:g,RowActionsCell:b,TableInfo:v,TaskStatusCell:D,TaskTypeCell:S},props:{entries:{type:Array,default:()=>[]},isEditable:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["delete-clicked","edit-clicked"],computed:{...T(["taskStatusMap","getTaskType","isStatusAutomationDisabled","remainingStatusAutomations"])},methods:{...$(["removeStatusAutomationFromProduction"]),async removeStatusAutomation(t){await this.removeStatusAutomationFromProduction(t),await this.$nextTick(),this.remainingStatusAutomations.length>0&&(this.statusAutomationId=this.remainingStatusAutomations[0].id)}}},F={class:"data-list"},I={class:"datatable-wrapper"},M={class:"datatable"},A={class:"datatable-head"},N={scope:"col",class:"name"},V={scope:"col",class:"in-task-type"},P={scope:"col",class:"in-task-status"},G={scope:"col",class:"automation-type"},R={scope:"col",class:"out-task-type"},j={scope:"col",class:"out-task-status"},q={scope:"col",class:"import-last-revision"},z={class:"datatable-body"},H={scope:"row",class:"name"},J={class:"flexrow"},K=["title"],O={class:"flexrow-item"},Q={class:"input-separator"},U={key:1,class:"name out-task-status"},W={class:"import-last-revision"},X={key:3},Y=["onClick"],Z={class:"has-text-centered nb-status-automations"};function x(t,d,i,tt,st,p){const k=l("alert-triangle-icon"),_=l("task-type-cell"),r=l("task-status-cell"),y=l("row-actions-cell"),h=l("table-info");return o(),n("div",F,[s("div",I,[s("table",M,[s("thead",A,[s("tr",null,[s("th",N,a(t.$t("status_automations.fields.entity_type")),1),s("th",V,a(t.$t("status_automations.fields.in_task_type")),1),s("th",P,a(t.$t("status_automations.fields.in_task_status")),1),s("th",G,a(t.$t("status_automations.fields.out_field_type")),1),s("th",R,a(t.$t("status_automations.fields.out_task_type")),1),s("th",j,a(t.$t("status_automations.fields.out_task_status")),1),s("th",q,a(t.$t("status_automations.fields.import_last_revision")),1),d[0]||(d[0]=s("th",{scope:"col",class:"actions"},"Â ",-1))])]),s("tbody",z,[(o(!0),n(C,null,B(i.entries,e=>(o(),n("tr",{class:"datatable-row",key:e.id},[s("td",H,[s("div",J,[t.isStatusAutomationDisabled(e)?(o(),n("span",{key:0,class:"flexrow-item",title:t.$t("status_automations.wrong_automation")},[c(k)],8,K)):E("",!0),s("span",O,a(e.entity_type),1)])]),c(_,{class:"in-task-type","task-type":t.getTaskType(e.in_task_type_id)},null,8,["task-type"]),c(r,{class:"in-task-status",entry:t.taskStatusMap.get(e.in_task_status_id)},null,8,["entry"]),s("td",Q,a(e.out_field_type==="ready_for"?t.$t("status_automations.change_ready_for"):t.$t("status_automations.change_status")),1),c(_,{class:"out-task-type","task-type":t.getTaskType(e.out_task_type_id)},null,8,["task-type"]),e.out_field_type==="status"?(o(),m(r,{key:0,class:"out-task-status",entry:t.taskStatusMap.get(e.out_task_status_id)},null,8,["entry"])):(o(),n("td",U)),s("td",W,a(t.formatBoolean(e.import_last_revision)),1),i.isEditable?(o(),m(y,{key:2,"entry-id":e.id,onEditClicked:u=>t.$emit("edit-clicked",e),onDeleteClicked:u=>t.$emit("delete-clicked",e)},null,8,["entry-id","onEditClicked","onDeleteClicked"])):(o(),n("td",X,[s("button",{class:"button",onClick:u=>p.removeStatusAutomation(e.id)},a(t.$t("main.remove")),9,Y)]))]))),128))])])]),c(h,{"is-loading":i.isLoading,"is-error":i.isError},null,8,["is-loading","is-error"]),s("p",Z,a(i.entries.length)+" "+a(t.$tc("status_automations.number",i.entries.length)),1)])}const ot=w(L,[["render",x],["__scopeId","data-v-caee808f"]]);export{ot as S};
//# sourceMappingURL=StatusAutomationList-DJcFk1PN.js.map
