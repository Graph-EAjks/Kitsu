import{a as o,b as r,n,f as i}from"./TaskInfo-3bc19eae.js";import{P as l}from"./PeopleNameCell-082cdd55.js";import{ac as p}from"./index-97d68077.js";const c={name:"production-team-list",components:{PeopleNameCell:l},props:["entries"],computed:{...o(["isCurrentUserAdmin"]),isEmpty(){return!this.entries||this.entries.length===0}},methods:{...r(["removePersonFromTeam"]),removePerson(s){this.removePersonFromTeam(s)}}};var d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"data-list"},[t("div",{staticClass:"datatable-wrapper"},[t("table",{staticClass:"datatable"},[t("thead",{staticClass:"datatable-head"},[t("tr",[t("th",{staticClass:"name datatable-row-header",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("people.list.name"))+" ")]),t("th",{staticClass:"email",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("people.list.email"))+" ")]),t("th",{staticClass:"phone",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("people.list.phone"))+" ")]),t("th",{staticClass:"role",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("people.list.role"))+" ")]),t("th",{staticClass:"actions",attrs:{scope:"col"}})])]),e.isEmpty?e._e():t("tbody",{staticClass:"datatable-body"},e._l(e.entries,function(a){return t("tr",{key:a.id,staticClass:"datatable-row"},[t("people-name-cell",{staticClass:"name datatable-row-header",attrs:{person:a}}),t("td",{staticClass:"email"},[e._v(e._s(a.email))]),t("td",{staticClass:"phone"},[e._v(e._s(a.phone))]),t("td",{staticClass:"role"},[e._v(e._s(e.$t("people.role."+a.role)))]),e.isCurrentUserAdmin?t("td",{staticClass:"actions"},[t("button",{staticClass:"button",on:{click:function(P){return e.removePerson(a)}}},[e._v(" "+e._s(e.$t("main.remove"))+" ")])]):t("td",{staticClass:"actions"})],1)}),0)])]),e.isEmpty?t("p",{staticClass:"has-text-centered mt2"},[e._v(" "+e._s(e.$t("people.empty_team"))+" ")]):e._e(),t("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.entries.length)+" "+e._s(e.$tc("people.persons",e.entries.length))+" ")])])},m=[],_=n(c,d,m,!1,null,"e21fbb2c",null,null);const u=_.exports;const v={name:"people",components:{PeopleField:p,ProductionTeamList:u},data(){return{person:null,isTeamLoading:!1,isTeamLoadingError:!1}},computed:{...o(["currentProduction","productionMap","openProductions","personMap","people"]),teamPersons(){return i(this.currentProduction.team.map(s=>this.personMap.get(s)))},unlistedPeople(){return this.people.filter(s=>!this.currentProduction.team.includes(s.id)&&s.active)}},methods:{...r(["addPersonToTeam"]),addPerson(){this.person&&(this.addPersonToTeam(this.person),setTimeout(()=>{this.$refs["people-field"].clear()},1))},removePerson(s){this.removePersonFromTeam(s)}},metaInfo(){return{title:`${this.currentProduction.name} | ${this.$t("people.team")} - Kitsu`}}};var f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"people page fixed-page"},[t("div",{staticClass:"flexrow mt2 add-people"},[t("people-field",{ref:"people-field",staticClass:"flexrow-item add-people-field",attrs:{people:e.unlistedPeople,placeholder:e.$t("people.add_member_to_team"),big:""},on:{enter:e.addPerson},model:{value:e.person,callback:function(a){e.person=a},expression:"person"}}),t("button",{staticClass:"button flexrow-item",on:{click:e.addPerson}},[e._v(" "+e._s(e.$t("main.add"))+" ")])],1),t("production-team-list",{attrs:{entries:e.teamPersons,"is-loading":e.isTeamLoading,"is-error":e.isTeamLoadingError},on:{remove:e.removePerson}})],1)},h=[],C=n(v,f,h,!1,null,"e45bb2c1",null,null);const g=C.exports;export{g as default};
//# sourceMappingURL=Team-eae510a5.js.map
