{"version":3,"file":"Timesheets-DsN48dfx.js","sources":["../../src/components/lists/PeopleTimesheetList.vue","../../src/components/lists/TimeSpentTaskList.vue","../../src/components/sides/PeopleTimesheetInfo.vue","../../src/components/pages/Timesheets.vue"],"sourcesContent":["<template>\n  <div class=\"data-list\">\n    <div class=\"datatable-wrapper\" ref=\"body\">\n      <table class=\"datatable\">\n        <thead class=\"datatable-head\">\n          <tr>\n            <th scope=\"col\" class=\"name datatable-row-header\">\n              {{ $t('people.list.name') }}\n            </th>\n\n            <!-- Year columns -->\n            <template v-if=\"detailLevel === 'year'\">\n              <th\n                :key=\"`year-${year}`\"\n                scope=\"col\"\n                class=\"time year\"\n                v-for=\"year in yearRange\"\n              >\n                {{ year }}\n              </th>\n            </template>\n\n            <!-- Month columns -->\n            <template v-if=\"detailLevel === 'month'\">\n              <th\n                :key=\"`month-${month}`\"\n                scope=\"col\"\n                class=\"time month\"\n                v-for=\"month in monthRange\"\n              >\n                {{ monthToString(month) }}\n              </th>\n            </template>\n\n            <!-- Week columns -->\n            <template v-if=\"detailLevel === 'week'\">\n              <th\n                :key=\"`week-${week}`\"\n                scope=\"col\"\n                class=\"daytime\"\n                :title=\"getWeekTitle(week)\"\n                v-for=\"week in weekRange\"\n              >\n                {{ week }}\n              </th>\n            </template>\n\n            <!-- Day columns -->\n            <template v-if=\"detailLevel === 'day'\">\n              <th\n                :key=\"`day-${day}`\"\n                scope=\"col\"\n                class=\"daytime\"\n                v-for=\"day in dayRange\"\n              >\n                {{ day }}\n              </th>\n            </template>\n            <th scope=\"col\" class=\"actions\"></th>\n          </tr>\n        </thead>\n        <tbody class=\"datatable-body\" v-if=\"!isLoading\">\n          <tr class=\"datatable-row\" v-for=\"person in people\" :key=\"person.id\">\n            <th class=\"datatable-row-header name\">\n              <div class=\"flexrow\">\n                <people-avatar class=\"flexrow-item\" :person=\"person\" />\n                <people-name class=\"flexrow-item\" with-link :person=\"person\" />\n              </div>\n            </th>\n\n            <!-- Year cells -->\n            <template v-if=\"detailLevel === 'year'\">\n              <td\n                :key=\"`year-${year}-${person.id}`\"\n                class=\"time year\"\n                :class=\"{\n                  selected: isYearSelected(person.id, year)\n                }\"\n                v-for=\"year in yearRange\"\n              >\n                <router-link\n                  v-if=\"yearDuration(year, person.id) > 0\"\n                  class=\"duration\"\n                  :to=\"getYearDetailRoute(person, year)\"\n                >\n                  {{ yearDuration(year, person.id) }}\n                </router-link>\n                <template v-else> - </template>\n              </td>\n            </template>\n\n            <!-- Month cells -->\n            <template v-if=\"detailLevel === 'month'\">\n              <td\n                :key=\"`month-${month}-${person.id}`\"\n                class=\"time month\"\n                :class=\"{\n                  selected: isMonthSelected(person.id, year, month)\n                }\"\n                v-for=\"month in monthRange\"\n              >\n                <router-link\n                  v-if=\"monthDuration(month, person.id) > 0\"\n                  class=\"duration\"\n                  :to=\"getMonthDetailRoute(person, year, month)\"\n                >\n                  {{ monthDuration(month, person.id) }}\n                </router-link>\n                <template v-else> - </template>\n              </td>\n            </template>\n\n            <!-- Week cells -->\n            <template v-if=\"detailLevel === 'week'\">\n              <td\n                :key=\"`week-${week}-${person.id}`\"\n                class=\"daytime\"\n                :class=\"{\n                  selected: isWeekSelected(person.id, year, week)\n                }\"\n                v-for=\"week in weekRange\"\n              >\n                <router-link\n                  v-if=\"weekDuration(week, person.id) > 0\"\n                  class=\"duration\"\n                  :class=\"{\n                    warning:\n                      weekDuration(week, person.id) >\n                      5 * organisation.hours_by_day\n                  }\"\n                  :to=\"getWeekDetailRoute(person, year, week)\"\n                >\n                  {{ weekDuration(week, person.id) }}\n                </router-link>\n                <template v-else> - </template>\n              </td>\n            </template>\n\n            <!-- Day cells -->\n            <template v-if=\"detailLevel === 'day'\">\n              <td\n                :key=\"`day-${day}-${person.id}`\"\n                class=\"daytime\"\n                :class=\"{\n                  weekend: isWeekend(year, month, day),\n                  selected: isDaySelected(person.id, year, month, day)\n                }\"\n                v-for=\"day in dayRange\"\n              >\n                <router-link\n                  v-if=\"dayDuration(day, person.id) > 0\"\n                  class=\"duration\"\n                  :to=\"getDayDetailRoute(person, year, month, day)\"\n                >\n                  {{ dayDuration(day, person.id) }}\n                </router-link>\n                <template v-else-if=\"isDayOff(person.id, day)\">\n                  {{ $t('timesheets.off').toUpperCase() }}\n                </template>\n                <template v-else> - </template>\n              </td>\n            </template>\n            <td class=\"actions\"></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <p class=\"has-text-centered footer-info\" v-if=\"!isLoading\">\n      {{ people.length }} {{ $tc('people.persons', people.length) }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters } from 'vuex'\n\nimport {\n  getMonthRange,\n  getWeekRange,\n  getDayRange,\n  hoursToDays,\n  monthToString,\n  range\n} from '@/lib/time'\n\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport PeopleName from '@/components/widgets/PeopleName.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\n\nexport default {\n  name: 'people-timesheet-list',\n\n  components: {\n    PeopleAvatar,\n    PeopleName,\n    TableInfo\n  },\n\n  data() {\n    return {\n      currentMonth: moment().month() + 1,\n      currentYear: moment().year(),\n      currentWeek: moment().week()\n    }\n  },\n\n  props: {\n    timesheet: {\n      type: Object,\n      default: () => {}\n    },\n\n    people: {\n      type: Array,\n      default: () => []\n    },\n\n    detailLevel: {\n      type: String,\n      default: 'day'\n    },\n\n    year: {\n      type: Number,\n      default: 0\n    },\n\n    month: {\n      type: Number,\n      default: 0\n    },\n\n    unit: {\n      type: String,\n      default: 'hour'\n    },\n\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  computed: {\n    ...mapGetters(['dayOffMap', 'organisation', 'route']),\n\n    yearRange() {\n      return range(2018, moment().year())\n    },\n\n    monthRange() {\n      return getMonthRange(this.year, this.currentYear, this.currentMonth)\n    },\n\n    dayRange() {\n      return getDayRange(\n        this.year,\n        this.month,\n        this.currentYear,\n        this.currentMonth\n      )\n    },\n\n    weekRange() {\n      return getWeekRange(this.year, this.currentYear, this.currentWeek)\n    },\n\n    isHours() {\n      return this.unit === 'hour'\n    }\n  },\n\n  methods: {\n    monthToString,\n\n    yearDuration(year, personId) {\n      const yearString = `${year}`\n      const duration = this.getDuration(yearString, personId)\n      return this.isHours\n        ? duration\n        : hoursToDays(this.organisation, duration).toFixed(2)\n    },\n\n    monthDuration(month, personId) {\n      const monthString = `${month}`\n      const duration = this.getDuration(monthString, personId)\n      return this.isHours\n        ? duration\n        : hoursToDays(this.organisation, duration).toFixed(2)\n    },\n\n    weekDuration(week, personId) {\n      const duration = this.getDuration(week, personId)\n      return this.isHours\n        ? duration\n        : hoursToDays(this.organisation, duration).toFixed(2)\n    },\n\n    dayDuration(day, personId) {\n      if (this.dayOffMap[personId]?.[`${day}`] === true) {\n        return this.$t('timesheets.off').toUpperCase()\n      } else {\n        const duration = this.getDuration(day, personId)\n        return this.isHours\n          ? duration\n          : hoursToDays(this.organisation, duration).toFixed(2)\n      }\n    },\n\n    getDuration(index, personId) {\n      if (\n        this.timesheet &&\n        this.timesheet[index] &&\n        this.timesheet[index][personId]\n      ) {\n        return this.timesheet[index][personId] / 60\n      } else {\n        return '-'\n      }\n    },\n\n    isWeekend(year, month, day) {\n      const date = moment(`${year}-${month}-${day}`, 'YYYY-M-D')\n      return [0, 6].includes(date.day())\n    },\n\n    isDaySelected(personId, year, month, day) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.month === month &&\n        this.$route.params.day === day\n      )\n    },\n\n    isWeekSelected(personId, year, week) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.week === week\n      )\n    },\n\n    isMonthSelected(personId, year, month) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.month === month\n      )\n    },\n\n    isYearSelected(personId, year) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year\n      )\n    },\n\n    getWeekTitle(week) {\n      const beginning = moment(this.currentYear + '-' + week, 'YYYY-W')\n      const end = beginning.clone().add(6, 'days')\n      return beginning.format('YYYY-MM-DD') + ' - ' + end.format('YYYY-MM-DD')\n    },\n\n    getYearDetailRoute(person, year) {\n      return {\n        name: 'timesheets-year-person',\n        params: {\n          person_id: person.id,\n          year: year\n        },\n        query: {\n          productionId: this.$route.query.productionId,\n          studioId: this.$route.query.studioId\n        }\n      }\n    },\n\n    getMonthDetailRoute(person, year, month) {\n      return {\n        name: 'timesheets-month-person',\n        params: {\n          person_id: person.id,\n          year: year,\n          month: month\n        },\n        query: {\n          productionId: this.$route.query.productionId,\n          studioId: this.$route.query.studioId\n        }\n      }\n    },\n\n    getWeekDetailRoute(person, year, week) {\n      return {\n        name: 'timesheets-week-person',\n        params: {\n          person_id: person.id,\n          year: year,\n          week: week\n        },\n        query: {\n          productionId: this.$route.query.productionId,\n          studioId: this.$route.query.studioId\n        }\n      }\n    },\n\n    getDayDetailRoute(person, year, month, day) {\n      return {\n        name: 'timesheets-day-person',\n        params: {\n          person_id: person.id,\n          year: year,\n          month: month,\n          day: day\n        },\n        query: {\n          productionId: this.$route.query.productionId,\n          studioId: this.$route.query.studioId\n        }\n      }\n    },\n\n    isDayOff(personId, day) {\n      const dayString = `${day}`.padStart(2, '0')\n      return this.dayOffMap[personId] && this.dayOffMap[personId][dayString]\n    }\n  },\n\n  watch: {\n    route() {\n      const els = document.getElementsByClassName('selected')\n      if (els.length === 0) {\n        // selected element is not visible\n        this.$refs.body.scrollLeft += 350\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n.dark .weekend {\n  background-color: $dark-grey;\n}\n\n.dark .duration:hover {\n  color: $white;\n}\n\n.name {\n  width: 230px;\n  min-width: 230px;\n}\n\n.time {\n  width: 70px;\n  min-width: 70px;\n\n  &.month {\n    width: 80px;\n    min-width: 80px;\n  }\n\n  &.year {\n    width: 90px;\n    min-width: 90px;\n  }\n}\n\n.daytime {\n  width: 60px;\n  min-width: 60px;\n}\n\n.time,\n.daytime {\n  text-align: center;\n  vertical-align: middle;\n}\n\nth.actions {\n  padding: 0;\n  width: 100%;\n  min-width: auto;\n}\n\na,\na:hover {\n  color: inherit;\n}\n\n.warning {\n  color: #ff3860;\n}\n\n.warning:hover {\n  color: red;\n}\n\n.weekend {\n  background-color: $white-grey;\n}\n\n.duration:hover {\n  background: var(--background-selectable);\n}\n\n.selected .duration {\n  background: var(--background-selected);\n  color: var(--text);\n\n  &:hover {\n    background: var(--background-selected);\n    color: var(--text);\n    cursor: default;\n  }\n}\n\n.duration {\n  border-radius: 0.3em;\n  padding: 0.5em;\n}\n\n.selected .duration.warning {\n  background: $red;\n  color: black;\n}\n</style>\n","<template>\n  <div class=\"data-list\">\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <div class=\"aggregated-time-spents\">\n      <div\n        :key=\"projectId\"\n        class=\"by-project\"\n        v-for=\"projectId in Object.keys(projects)\"\n      >\n        <production-name\n          :production=\"{\n            id: projectId,\n            name: projectNames[projectId]\n          }\"\n          v-if=\"projectNames[projectId]\"\n        />\n\n        <div\n          :key=\"taskTypeId\"\n          class=\"by-task-type-id\"\n          v-for=\"taskTypeId in Object.keys(projects[projectId])\"\n        >\n          <task-type-name :task-type=\"taskTypeMap.get(taskTypeId)\" />\n\n          <div class=\"table-body\">\n            <table class=\"datatable\">\n              <tbody class=\"datatable-body\">\n                <tr\n                  :key=\"task.id\"\n                  class=\"by-task-type-id datatable-row\"\n                  v-for=\"task in projects[projectId][taskTypeId]\"\n                >\n                  <router-link :to=\"getTaskPath(task)\">\n                    <td class=\"name\">\n                      {{ task.name }}\n                    </td>\n                    <td class=\"duration\">\n                      {{ getDuration(task) }}\n                    </td>\n                  </router-link>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { firstBy } from 'thenby'\n\nimport { getTaskPath } from '@/lib/path'\nimport { sortByName } from '@/lib/sorting'\nimport { hoursToDays } from '@/lib/time'\n\nimport ProductionName from '@/components/widgets/ProductionName.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\nimport TaskTypeName from '@/components/widgets/TaskTypeName.vue'\n\nexport default {\n  name: 'time-spent-task-list',\n\n  components: {\n    TableInfo,\n    ProductionName,\n    TaskTypeName\n  },\n\n  data() {\n    return {\n      projectNames: {}\n    }\n  },\n\n  props: {\n    tasks: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    unit: {\n      type: String,\n      default: 'hour'\n    }\n  },\n\n  computed: {\n    ...mapGetters(['organisation', 'productionMap', 'taskTypeMap']),\n\n    isHours() {\n      return this.unit === 'hour'\n    },\n\n    projects() {\n      const projects = {}\n      const tasks = [...this.tasks].sort(firstBy('project_name'))\n\n      tasks.forEach(task => {\n        if (!projects[task.project_id]) projects[task.project_id] = {}\n        if (!projects[task.project_id][task.task_type_id]) {\n          projects[task.project_id][task.task_type_id] = []\n        }\n\n        let name = task.entity_name\n        if (['Shot', 'Sequence'].includes(task.entity_type_name)) {\n          name = `${task.sequence_name} / ${name}`\n          if (task.episode_name) name = `${task.episode_name} / ${name}`\n        } else {\n          name = `${task.entity_type_name} / ${name}`\n        }\n\n        projects[task.project_id][task.task_type_id].push({\n          id: task.task_id,\n          project_id: task.project_id,\n          task_type_id: task.task_type_id,\n          name: name,\n          duration: task.duration\n        })\n      })\n\n      Object.keys(projects).forEach(projectId => {\n        Object.keys(projects[projectId]).forEach(taskTypeId => {\n          projects[projectId][taskTypeId] = sortByName(\n            projects[projectId][taskTypeId]\n          )\n        })\n      })\n\n      return projects\n    }\n  },\n\n  methods: {\n    getDuration(task) {\n      const duration = task.duration / 60\n      return this.isHours\n        ? duration\n        : hoursToDays(this.organisation, duration).toFixed(2)\n    },\n\n    getTaskPath(task) {\n      const project = this.productionMap.get(task.project_id)\n      if (!project || project.project_status_name === 'Closed') {\n        return ''\n      }\n      const isTVShow = project.production_type === 'tvshow'\n      const episode = { id: project.first_episode_id }\n      return getTaskPath(task, null, isTVShow, episode, this.taskTypeMap)\n    }\n  },\n\n  watch: {\n    tasks() {\n      this.projectNames = this.tasks.reduce((projectNames, task) => {\n        const production = this.productionMap.get(task.project_id)\n        const suffix =\n          production?.project_status_name === 'Closed' ? ' (closed)' : ''\n        projectNames[task.project_id] = task.project_name + suffix\n        return projectNames\n      }, {})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .table {\n  border-color: $dark-grey;\n}\n\n.name {\n  width: 300px;\n}\n\n.duration {\n  text-align: right;\n}\n\n.data-list {\n  padding-right: 1em;\n}\n\n.table {\n  border-top: 1px solid $light-grey;\n  border-bottom: 1px solid $light-grey;\n  margin-bottom: 1em;\n  margin-top: 0.5em;\n}\n\n.by-task-type-id {\n  margin-top: 1em;\n  padding-left: 1em;\n}\n\n.by-project {\n  margin-bottom: 2em;\n}\n\na {\n  color: var(--text);\n}\n</style>\n","<template>\n  <div class=\"people-timesheet-info\">\n    <div class=\"close\">\n      <router-link class=\"close-button\" :to=\"closeRoute\">\n        <x-icon />\n      </router-link>\n    </div>\n\n    <div class=\"flexrow\">\n      <people-avatar class=\"flexrow-item\" :person=\"person\" :is-lazy=\"false\" />\n      <page-title class=\"flexrow-item\" :text=\"person.full_name\" />\n    </div>\n\n    <div class=\"info-date\" v-if=\"isYearInfo\">\n      {{ year }}\n    </div>\n\n    <div class=\"info-date\" v-if=\"isMonthInfo\">{{ monthString }} {{ year }}</div>\n\n    <div class=\"info-date\" v-else-if=\"isWeekInfo\">\n      {{ $t('main.week') }}\n      {{ week }}, {{ startDay }} - {{ endDay }} {{ weekMonth }} {{ year }}\n    </div>\n\n    <div class=\"info-day-off\" v-if=\"!isDayInfo\">\n      {{ dayOffCount }}\n      {{ $tc('days_off.nb_days_off', dayOffCount) }}\n    </div>\n\n    <div class=\"info-date\" v-else-if=\"isDayInfo\">\n      {{ day }} {{ monthString }} {{ year }}\n    </div>\n\n    <time-spent-task-list\n      class=\"time-spent-list\"\n      :tasks=\"tasks\"\n      :is-loading=\"isLoading\"\n      :is-error=\"isLoadingError\"\n      :unit=\"unit\"\n    />\n  </div>\n</template>\n\n<script>\nimport { XIcon } from 'lucide-vue-next'\nimport moment from 'moment-timezone'\n\nimport { monthToString } from '@/lib/time'\n\nimport PageTitle from '@/components/widgets/PageTitle.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport TimeSpentTaskList from '@/components/lists/TimeSpentTaskList.vue'\n\nexport default {\n  name: 'people-timesheet-info',\n\n  components: {\n    PageTitle,\n    PeopleAvatar,\n    TimeSpentTaskList,\n    XIcon\n  },\n\n  props: {\n    person: {\n      type: Object,\n      default: () => {}\n    },\n    year: {\n      type: Number,\n      default: 0\n    },\n    month: {\n      type: Number,\n      default: 0\n    },\n    week: {\n      type: Number,\n      default: 0\n    },\n    day: {\n      type: Number,\n      default: 0\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isLoadingError: {\n      type: Boolean,\n      default: false\n    },\n    tasks: {\n      type: Array,\n      default: () => []\n    },\n    dayOffCount: {\n      type: Number,\n      default: 0\n    },\n    unit: {\n      type: String,\n      default: 'hour'\n    }\n  },\n\n  emits: ['close'],\n\n  computed: {\n    startDay() {\n      return moment().day('Monday').year(this.year).week(this.week).date()\n    },\n\n    endDay() {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .add(6, 'days')\n        .date()\n    },\n\n    weekMonth() {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .format('MMM')\n    },\n\n    monthString() {\n      return monthToString(this.month)\n    },\n\n    isYearInfo() {\n      return !this.isMonthInfo && !this.isWeekInfo && !this.isDayInfo\n    },\n\n    isMonthInfo() {\n      return this.$route.path.indexOf('month') > 0\n    },\n\n    isWeekInfo() {\n      return this.$route.path.indexOf('week') > 0\n    },\n\n    isDayInfo() {\n      return this.$route.path.indexOf('day') > 0\n    },\n\n    closeRoute() {\n      const query = {\n        productionId: this.$route.query.productionId,\n        studioId: this.$route.query.studioId\n      }\n      if (this.isYearInfo) {\n        return {\n          name: 'timesheets-year',\n          params: {\n            year: this.year\n          },\n          query\n        }\n      } else if (this.isMonthInfo) {\n        return {\n          name: 'timesheets-month',\n          params: {\n            year: this.year,\n            month: this.month\n          },\n          query\n        }\n      } else if (this.isWeekInfo) {\n        return {\n          name: 'timesheets-week',\n          params: {\n            year: this.year,\n            week: this.week\n          },\n          query\n        }\n      } else if (this.isDayInfo) {\n        return {\n          name: 'timesheets-day',\n          params: {\n            year: this.year,\n            month: this.month,\n            day: this.day\n          },\n          query\n        }\n      } else {\n        return {\n          name: 'timesheets',\n          query\n        }\n      }\n    }\n  },\n\n  methods: {\n    onCloseClicked() {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-list {\n  padding-bottom: 5em;\n}\n\n.people-timesheet-info {\n  padding: 1em;\n}\n\n.info-date {\n  font-size: 1.5em;\n  margin-top: 1em;\n  text-transform: capitalize;\n}\n\n.close {\n  text-align: right;\n}\n</style>\n","<template>\n  <div class=\"columns fixed-page\">\n    <div class=\"column main-column\">\n      <div class=\"timesheets page\">\n        <div class=\"page-header flexrow\">\n          <page-title\n            class=\"flexrow-item title\"\n            :text=\"$t('timesheets.title')\"\n          />\n          <combobox-production\n            class=\"flexrow-item\"\n            :label=\"$t('main.production')\"\n            :production-list=\"productionList\"\n            v-model=\"productionIdString\"\n          />\n          <combobox-studio\n            class=\"flexrow-item field\"\n            :label=\"$t('main.studio')\"\n            v-model=\"studioIdString\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.detail_level')\"\n            :options=\"detailOptions\"\n            v-model=\"detailLevelString\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.year')\"\n            :options=\"yearOptions\"\n            v-model=\"yearString\"\n            v-if=\"detailLevelString !== 'year'\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.month')\"\n            :options=\"monthOptions\"\n            v-model=\"monthString\"\n            v-if=\"detailLevelString === 'day'\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.unit')\"\n            :options=\"unitOptions\"\n            v-model=\"unit\"\n          />\n          <div class=\"filler\"></div>\n          <button-simple\n            class=\"flexrow-item\"\n            :title=\"$t('timesheets.export_timesheet')\"\n            icon=\"export\"\n            @click=\"exportTimesheet\"\n          />\n          <button-href-link\n            class=\"flexrow-item\"\n            :title=\"$t('timesheets.export_timespents')\"\n            path=\"/api/export/csv/time-spents.csv\"\n            icon=\"export-lines\"\n            v-if=\"isCurrentUserAdmin\"\n          />\n        </div>\n\n        <people-timesheet-list\n          class=\"data-list\"\n          :people=\"filteredPeople\"\n          :timesheet=\"timesheet\"\n          :detail-level=\"detailLevel\"\n          :month=\"currentMonth\"\n          :year=\"currentYear\"\n          :unit=\"unit\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isLoadingError\"\n        />\n      </div>\n    </div>\n    <div class=\"column side-column\" v-if=\"showInfo\">\n      <people-timesheet-info\n        :person=\"currentPerson\"\n        :production=\"productionId\"\n        :year=\"currentYear\"\n        :month=\"currentMonth\"\n        :week=\"currentWeek\"\n        :day=\"currentDay\"\n        :unit=\"unit\"\n        :is-loading=\"isInfoLoading\"\n        :is-loading-error=\"isInfoLoadingError\"\n        :tasks=\"tasks\"\n        :day-off-count=\"dayOffCount\"\n        @close=\"hideSideInfo\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport csv from '@/lib/csv'\nimport { monthToString, range } from '@/lib/time'\nimport { sortByName } from '@/lib/sorting'\nimport stringHelpers from '@/lib/string'\n\nimport ButtonHrefLink from '@/components/widgets/ButtonHrefLink.vue'\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport Combobox from '@/components/widgets/Combobox.vue'\nimport ComboboxProduction from '@/components/widgets/ComboboxProduction.vue'\nimport ComboboxStudio from '@/components/widgets/ComboboxStudio.vue'\nimport PeopleTimesheetList from '@/components/lists/PeopleTimesheetList.vue'\nimport PeopleTimesheetInfo from '@/components/sides/PeopleTimesheetInfo.vue'\nimport PageTitle from '@/components/widgets/PageTitle.vue'\n\nexport default {\n  name: 'timesheets',\n\n  components: {\n    ButtonSimple,\n    ButtonHrefLink,\n    Combobox,\n    ComboboxProduction,\n    ComboboxStudio,\n    PageTitle,\n    PeopleTimesheetList,\n    PeopleTimesheetInfo\n  },\n\n  data() {\n    return {\n      detailOptions: [\n        {\n          label: this.$t('main.day'),\n          value: 'day'\n        },\n        {\n          label: this.$t('main.week'),\n          value: 'week'\n        },\n        {\n          label: this.$t('main.month'),\n          value: 'month'\n        },\n        {\n          label: this.$t('main.year'),\n          value: 'year'\n        }\n      ],\n      unitOptions: [\n        {\n          label: this.$t('main.hour'),\n          value: 'hour'\n        },\n        {\n          label: this.$t('main.day'),\n          value: 'day'\n        }\n      ],\n\n      detailLevelString: 'day',\n      detailLevel: 'day',\n      productionId: '',\n      productionIdString: '',\n      studioId: '',\n      studioIdString: '',\n      yearString: `${moment().year()}`,\n      monthString: `${moment().month() + 1}`,\n      unit: 'hour',\n\n      currentYear: moment().year(),\n      currentMonth: moment().month() + 1,\n      currentWeek: moment().week(),\n      currentDay: moment().date(),\n      currentPerson: this.getCurrentPerson(),\n\n      isLoading: false,\n      isLoadingError: false,\n\n      dayOffCount: 0,\n      isInfoLoading: false,\n      isInfoLoadingError: false,\n      showInfo: true,\n      tasks: []\n    }\n  },\n\n  created() {\n    this.isLoading = true\n    this.loadProductions()\n    if (this.people.length === 0) {\n      this.loadPeople(() => {\n        this.loadRoute()\n      })\n    } else {\n      this.loadRoute()\n    }\n  },\n\n  mounted() {\n    const productionId = this.$route.query.productionId || undefined\n    const studioId = this.$route.query.studioId || undefined\n\n    if (productionId || studioId) {\n      this.silent = true\n      this.productionId = productionId\n      this.productionIdString = productionId\n      this.studioId = studioId\n      this.studioIdString = studioId\n      this.reloadTimesheet().then(() => {\n        this.silent = false\n      })\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isCurrentUserAdmin',\n      'organisation',\n      'people',\n      'productions',\n      'personMap',\n      'timesheet'\n    ]),\n\n    productionList() {\n      const productions = sortByName([...this.productions]).map(production => {\n        const suffix =\n          production.project_status_name === 'Closed' ? ' (closed)' : ''\n        return {\n          ...production,\n          name: production.name + suffix\n        }\n      })\n      return [\n        {\n          id: '',\n          name: this.$t('main.all')\n        },\n        ...productions\n      ]\n    },\n\n    filteredPeople() {\n      return this.people.filter(person => {\n        const keys = Object.keys(this.timesheet)\n        let isThere = false\n        let i = 0\n        do {\n          if (this.timesheet[keys[i]]) {\n            isThere = this.timesheet[keys[i]][person.id] !== undefined\n          }\n          i++\n        } while (!isThere && i < keys.length)\n\n        return isThere\n      })\n    },\n\n    yearOptions() {\n      const year = 2018\n      const currentYear = moment().year()\n      return range(year, currentYear).map(year => ({\n        label: year,\n        value: `${year}`\n      }))\n    },\n\n    monthOptions() {\n      const currentYear = `${moment().year()}`\n      const month = 1\n      const currentMonth = moment().month() + 1\n      let monthRange = range(month, 12)\n      if (currentYear === this.yearString) {\n        monthRange = range(month, currentMonth)\n      }\n\n      return monthRange.map(month => ({\n        label: monthToString(month),\n        value: `${month}`\n      }))\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'loadPeople',\n      'loadProductions',\n      'loadAggregatedPersonDaysOff',\n      'loadAggregatedPersonTimeSpents',\n      'loadTimesheets'\n    ]),\n\n    reloadTimesheet() {\n      this.isLoading = true\n      this.isLoadingError = false\n      return this.loadTimesheets({\n        detailLevel: this.detailLevel,\n        year: this.currentYear,\n        month: this.currentMonth,\n        productionId: this.productionId,\n        studioId: this.studioId\n      })\n        .then(() => {\n          this.isLoading = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.isLoading = false\n          this.isLoadingError = true\n        })\n    },\n\n    showSideInfo() {\n      this.showInfo = true\n    },\n\n    hideSideInfo() {\n      this.showInfo = false\n    },\n\n    loadRoute() {\n      // The main idea is to build the context from the route and compare it\n      // to the current context. If there are changes, it applies it.\n      // It handles too the display or not of the side column.\n      this.$options.silent = true\n      const { month, year, week, day } = this.$route.params\n      const previousProduction = `${this.productionId}`\n      const previousStudio = `${this.studioId}`\n      const previousDetailLevel = `${this.detailLevel}`\n      const previousMonth = `${this.currentMonth}`\n      const previousYear = `${this.currentYear}`\n\n      if (this.$route.path.indexOf('week') > 0) this.detailLevel = 'week'\n      if (this.$route.path.indexOf('month') > 0) this.detailLevel = 'month'\n      if (this.$route.path.indexOf('day') > 0) this.detailLevel = 'day'\n      if (this.$route.path.indexOf('year') > 0) this.detailLevel = 'year'\n      this.currentPerson = this.getCurrentPerson()\n      this.detailLevelString = this.detailLevel\n\n      if (month) {\n        this.currentMonth = Number(month)\n        this.monthString = `${month}`\n      }\n      if (year) {\n        this.currentYear = Number(year)\n        this.yearString = `${year}`\n      }\n      if (week) {\n        this.currentWeek = Number(week)\n        this.weekString = `${week}`\n      }\n      if (day) {\n        this.currentDay = Number(day)\n      }\n      this.productionId = this.$route.query.productionId || ''\n      this.studioId = this.$route.query.studioId || ''\n\n      const detailLevelHasChanged = previousDetailLevel !== this.detailLevel\n      const monthHasChanged =\n        previousMonth.localeCompare(`${this.currentMonth}`) !== 0\n      const yearHasChanged =\n        previousYear.localeCompare(`${this.currentYear}`) !== 0\n      const productionHasChanged =\n        previousProduction.localeCompare(`${this.productionId}`) !== 0\n      const studioHasChanged =\n        previousStudio.localeCompare(`${this.studioId}`) !== 0\n      this.$nextTick(() => {\n        this.$options.silent = false\n      })\n\n      if (this.$route.path.indexOf('person') > 0) {\n        this.showSideInfo()\n        this.loadAggregate()\n      } else {\n        this.hideSideInfo()\n      }\n\n      if (\n        this.isLoading ||\n        monthHasChanged ||\n        yearHasChanged ||\n        detailLevelHasChanged ||\n        productionHasChanged ||\n        studioHasChanged\n      ) {\n        this.reloadTimesheet()\n      }\n    },\n\n    loadAggregate() {\n      this.isInfoLoading = true\n      this.isInfoLoadingError = false\n      this.tasks = []\n      this.loadAggregatedPersonTimeSpents({\n        personId: this.$route.params.person_id,\n        detailLevel: this.detailLevel,\n        year: this.$route.params.year,\n        month: this.$route.params.month,\n        week: this.$route.params.week,\n        day: this.$route.params.day,\n        productionId: this.productionId,\n        studioId: this.studioId\n      })\n        .then(tasks => {\n          this.tasks = tasks.filter(task => task.duration > 0)\n          return this.loadAggregatedPersonDaysOff({\n            personId: this.$route.params.person_id,\n            detailLevel: this.detailLevel,\n            year: this.$route.params.year,\n            month: this.$route.params.month,\n            week: this.$route.params.week\n          })\n        })\n        .then(dayOffs => {\n          this.dayOffCount = dayOffs.length\n          this.isInfoLoading = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.isInfoLoadingError = true\n        })\n    },\n\n    getCurrentPerson() {\n      const personId = this.$route.params.person_id\n      if (personId && this.personMap) {\n        return this.personMap.get(personId)\n      } else {\n        return {}\n      }\n    },\n\n    exportTimesheet() {\n      const nameData = ['timesheet', this.detailLevel, this.currentYear]\n      if (this.detailLevel === 'day') nameData.push(this.currentMonth)\n      const name = stringHelpers.slugify(nameData.join('_'))\n      csv.generateTimesheet(\n        name,\n        this.timesheet,\n        this.filteredPeople,\n        this.unit,\n        this.organisation,\n        this.detailLevel,\n        this.currentYear,\n        this.currentMonth,\n        moment().month() + 1,\n        moment().year(),\n        moment().week()\n      )\n    },\n\n    updateRoute({ productionId, studioId }) {\n      const query = { ...this.$route.query }\n\n      if (productionId !== undefined) {\n        query.productionId = productionId || undefined\n      }\n      if (studioId !== undefined) {\n        query.studioId = studioId || undefined\n      }\n\n      if (JSON.stringify(query) !== JSON.stringify(this.$route.query)) {\n        this.$router.push({ query })\n      }\n    }\n  },\n\n  watch: {\n    detailLevelString() {\n      if (this.silent) return\n      if (this.detailLevel !== this.detailLevelString) {\n        if (this.detailLevelString === 'month') {\n          this.$router.push({\n            name: 'timesheets-month',\n            params: {\n              year: this.currentYear\n            },\n            query: this.$route.query\n          })\n        } else if (this.detailLevelString === 'week') {\n          this.$router.push({\n            name: 'timesheets-week',\n            params: {\n              year: this.currentYear\n            },\n            query: this.$route.query\n          })\n        } else if (this.detailLevelString === 'day') {\n          this.$router.push({\n            name: 'timesheets-day',\n            params: {\n              year: this.currentYear,\n              month: this.currentMonth\n            },\n            query: this.$route.query\n          })\n        } else if (this.detailLevelString === 'year') {\n          this.$router.push({\n            name: 'timesheets-year',\n            params: {\n              year: this.currentYear\n            },\n            query: this.$route.query\n          })\n        }\n      }\n    },\n\n    yearString() {\n      if (this.silent) return\n      const year = Number(this.yearString)\n      const currentMonth = moment().month()\n      if (this.currentYear !== year) {\n        if (this.detailLevel === 'month') {\n          this.$router.push({\n            name: 'timesheets-month',\n            params: { year },\n            query: this.$route.query\n          })\n        } else if (this.detailLevel === 'week') {\n          this.$router.push({\n            name: 'timesheets-week',\n            params: { year },\n            query: this.$route.query\n          })\n        } else {\n          this.$router.push({\n            name: 'timesheets-day',\n            params: {\n              year: year,\n              month: Math.min(Number(this.monthString), currentMonth)\n            },\n            query: this.$route.query\n          })\n        }\n      }\n    },\n\n    monthString() {\n      if (this.silent) return\n      if (this.currentMonth !== Number(this.monthString)) {\n        this.$router.push({\n          name: 'timesheets-day',\n          params: {\n            year: this.currentYear,\n            month: Number(this.monthString)\n          },\n          query: this.$route.query\n        })\n      }\n    },\n\n    productionIdString(value) {\n      if (this.silent) return\n      this.updateRoute({ productionId: value })\n    },\n\n    studioIdString(value) {\n      if (this.silent) return\n      this.updateRoute({ studioId: value })\n    },\n\n    $route() {\n      this.loadRoute()\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('timesheets.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .side-column {\n  border-color: $dark-grey-lightest;\n}\n\n.data-list {\n  margin-top: 0;\n}\n\n.timesheets {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding-bottom: 1em;\n}\n\n.side-column {\n  border-left: 3px solid $light-grey;\n}\n\n.title {\n  margin-right: 1em;\n  white-space: nowrap;\n}\n</style>\n"],"names":["_sfc_main","PeopleAvatar","PeopleName","TableInfo","moment","mapGetters","range","getMonthRange","getDayRange","getWeekRange","monthToString","year","personId","yearString","duration","hoursToDays","month","monthString","week","day","_a","index","date","beginning","end","person","dayString","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_8","_hoisted_9","_openBlock","_createElementBlock","_createElementVNode","_hoisted_2","_hoisted_5","_toDisplayString","_ctx","$props","_Fragment","_renderList","$options","_createCommentVNode","_hoisted_7","_createVNode","_component_people_avatar","_component_people_name","_normalizeClass","_createBlock","_component_router_link","_withCtx","_createTextVNode","_component_table_info","_hoisted_10","ProductionName","TaskTypeName","projects","firstBy","task","name","projectId","taskTypeId","sortByName","project","isTVShow","episode","getTaskPath","projectNames","production","suffix","$data","_component_production_name","_component_task_type_name","PageTitle","TimeSpentTaskList","XIcon","query","_component_x_icon","_component_page_title","_component_time_spent_task_list","ButtonSimple","ButtonHrefLink","Combobox","ComboboxProduction","ComboboxStudio","PeopleTimesheetList","PeopleTimesheetInfo","productionId","studioId","productions","keys","isThere","i","currentYear","currentMonth","monthRange","mapActions","err","previousProduction","previousStudio","previousDetailLevel","previousMonth","previousYear","detailLevelHasChanged","monthHasChanged","yearHasChanged","productionHasChanged","studioHasChanged","tasks","dayOffs","nameData","stringHelpers","csv","value","_component_combobox_production","_cache","$event","_component_combobox_studio","_component_combobox","_component_button_simple","_component_button_href_link","_component_people_timesheet_list","_component_people_timesheet_info"],"mappings":"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"}