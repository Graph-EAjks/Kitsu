(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06abf103"],{"2b61":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{modal:!0,"is-active":e.active}},[a("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),a("div",{staticClass:"modal-content"},[a("div",{staticClass:"box content"},[a("h1",{staticClass:"title"},[e._v(" "+e._s(e.title)+" ")]),a("p",[e._v(" "+e._s(e.$t("main.csv.select_file"))+" ")]),a("file-upload",{ref:"uploadAvatarField",attrs:{label:e.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}}),e.isError?a("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("profile.avatar.error_upload"))+" ")]):e._e(),a("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.formData},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},i=[],r=a("2f62"),s=a("d065"),n=a("4085"),l=a("d5c9");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t=m(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e){var t=p(e,"string");return"symbol"===c(t)?t:String(t)}function p(e,t){if("object"!==c(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var _={name:"change-avatar-modal",mixins:[s["a"]],components:{FileUpload:n["a"],ModalFooter:l["a"]},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{formData:null}},computed:d({},Object(r["c"])([])),methods:d(d({},Object(r["b"])([])),{},{onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},onConfirmClicked:function(){this.$emit("confirm",this.formData)}}),watch:{active:function(){this.formData=null,this.$refs.uploadAvatarField.reset()}}},b=_,v=(a("c315"),a("2877")),h=Object(v["a"])(b,o,i,!1,null,"4f5b7638",null);t["a"]=h.exports},"421c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile page"},[a("div",{staticClass:"profile-content"},[a("div",{staticClass:"has-text-centered profile-header"},[a("div",{staticClass:"profile-header-content has-text-centered"},[a("people-avatar",{ref:"avatar",attrs:{"no-cache":!0,person:this.user,size:150,"font-size":60}}),a("p",[a("button",{staticClass:"button is-link change-avatar-button",on:{click:e.showAvatarModal}},[e._v(" "+e._s(e.$t("profile.change_avatar"))+" ")])]),a("p",[a("button",{staticClass:"button is-link clear-avatar-button",on:{click:e.removeAvatar}},[e._v(" "+e._s(e.$t("profile.clear_avatar"))+" ")])]),a("h1",[e._v(" "+e._s(e.$t("profile.title"))+" ")])],1)]),a("div",{staticClass:"profile-body"},[a("h2",[e._v(" "+e._s(e.$t("profile.info_title"))+" ")]),a("text-field",{attrs:{label:e.$t("people.fields.first_name"),disabled:this.user.is_generated_from_ldap},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}}),a("text-field",{attrs:{label:e.$t("people.fields.last_name"),disabled:this.user.is_generated_from_ldap},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}}),a("text-field",{attrs:{label:e.$t("people.fields.email"),disabled:this.user.is_generated_from_ldap},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("text-field",{attrs:{label:e.$t("people.fields.phone")},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("profile.timezone"))+" ")]),a("span",{staticClass:"select is-medium"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.timezone,expression:"form.timezone"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"timezone",t.target.multiple?a:a[0])}}},e._l(e.timezones,(function(t){return a("option",{key:t},[e._v(" "+e._s(t)+" ")])})),0)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("profile.language"))+" ")]),a("span",{staticClass:"select is-medium"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.locale,expression:"form.locale"}],domProps:{value:e.form.locale},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"locale",t.target.multiple?a:a[0])},e.localeChanged]}},[a("option",{attrs:{value:"zh_Hans_CN"}},[e._v("Chinese")]),a("option",{attrs:{value:"zh_Hant_TW"}},[e._v("Chinese (TW)")]),a("option",{attrs:{value:"nl_NL"}},[e._v("Dutch")]),a("option",{attrs:{value:"en_US"}},[e._v("English")]),a("option",{attrs:{value:"fr_FR"}},[e._v("French")]),a("option",{attrs:{value:"de_DE"}},[e._v("German")]),a("option",{attrs:{value:"hu_HU"}},[e._v("Hungarian")]),a("option",{attrs:{value:"pt_BR"}},[e._v("Portuguese (Brasilian)")]),a("option",{attrs:{value:"fa_IR"}},[e._v("Persian")]),a("option",{attrs:{value:"es_ES"}},[e._v("Spanish")]),a("option",{attrs:{value:"ru_RU"}},[e._v("Russian")])])])]),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_enabled")},model:{value:e.form.notifications_enabled,callback:function(t){e.$set(e.form,"notifications_enabled",t)},expression:"form.notifications_enabled"}})],1),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_slack_enabled")},model:{value:e.form.notifications_slack_enabled,callback:function(t){e.$set(e.form,"notifications_slack_enabled",t)},expression:"form.notifications_slack_enabled"}})],1),"true"===e.form.notifications_slack_enabled?a("text-field",{attrs:{label:e.$t("profile.notifications_slack_user")},model:{value:e.form.notifications_slack_userid,callback:function(t){e.$set(e.form,"notifications_slack_userid",t)},expression:"form.notifications_slack_userid"}}):e._e(),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_mattermost_enabled")},model:{value:e.form.notifications_mattermost_enabled,callback:function(t){e.$set(e.form,"notifications_mattermost_enabled",t)},expression:"form.notifications_mattermost_enabled"}})],1),"true"===e.form.notifications_mattermost_enabled?a("text-field",{attrs:{label:e.$t("profile.notifications_mattermost_user")},model:{value:e.form.notifications_mattermost_userid,callback:function(t){e.$set(e.form,"notifications_mattermost_userid",t)},expression:"form.notifications_mattermost_userid"}}):e._e(),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_discord_enabled")},model:{value:e.form.notifications_discord_enabled,callback:function(t){e.$set(e.form,"notifications_discord_enabled",t)},expression:"form.notifications_discord_enabled"}})],1),"true"===e.form.notifications_discord_enabled?a("text-field",{attrs:{label:e.$t("profile.notifications_discord_user")},model:{value:e.form.notifications_discord_userid,callback:function(t){e.$set(e.form,"notifications_discord_userid",t)},expression:"form.notifications_discord_userid"}}):e._e(),a("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":e.isSaveProfileLoading},on:{click:function(t){return e.saveProfile({form:e.form})}}},[e._v(" "+e._s(e.$t("profile.save.button"))+" ")]),a("p",{class:{error:!0,"is-hidden":!e.isSaveProfileLoadingError}},[e._v(" "+e._s(e.$t("profile.save.error"))+" ")]),a("h2",[e._v(" "+e._s(e.$t("profile.password_title"))+" ")]),a("text-field",{attrs:{label:e.$t("people.fields.old_password"),disabled:this.user.is_generated_from_ldap,type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}}),a("text-field",{attrs:{label:e.$t("people.fields.password"),disabled:this.user.is_generated_from_ldap,type:"password"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}}),a("text-field",{attrs:{label:e.$t("people.fields.password_2"),disabled:this.user.is_generated_from_ldap,type:"password"},model:{value:e.passwordForm.password2,callback:function(t){e.$set(e.passwordForm,"password2",t)},expression:"passwordForm.password2"}}),a("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":e.changePassword.isLoading},attrs:{disabled:this.user.is_generated_from_ldap},on:{click:function(t){return e.passwordChangeRequested()}}},[e._v(" "+e._s(e.$t("profile.change_password.button"))+" ")]),a("p",{class:{"change-password-message":!0,error:!0,"is-hidden":e.changePassword.isValid}},[e._v(" "+e._s(e.$t("profile.change_password.unvalid"))+" ")]),a("p",{class:{"change-password-message":!0,success:!0,"is-hidden":!e.changePassword.isSuccess}},[e._v(" "+e._s(e.$t("profile.change_password.success"))+" ")]),a("p",{class:{"change-password-message":!0,error:!0,"is-hidden":!e.changePassword.isError}},[e._v(" "+e._s(e.$t("profile.change_password.error"))+" ")])],1)]),a("change-avatar-modal",{attrs:{active:e.changeAvatar.isModalShown,"is-loading":e.changeAvatar.isLoading,"is-error":e.changeAvatar.isLoadingError,"form-data":e.changeAvatar.formData,title:e.$t("profile.avatar.title")},on:{fileselected:e.selectFile,confirm:e.uploadAvatarFile,cancel:e.hideAvatarModal}})],1)},i=[],r=a("7f45"),s=a.n(r),n=a("2f62"),l=a("4636"),c=a("2b61"),f=a("eb8c"),d=a("7bf8");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t=b(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e){var t=v(e,"string");return"symbol"===u(t)?t:String(t)}function v(e,t){if("object"!==u(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var h={name:"profile",components:{ComboboxBoolean:l["a"],PeopleAvatar:f["a"],ChangeAvatarModal:c["a"],TextField:d["a"]},data:function(){return{form:{first_name:"",last_name:"",notifications_enabled:"false",notifications_slack_enabled:"false",notifications_slack_userid:"",notifications_mattermost_enabled:"false",notifications_mattermost_userid:"",notifications_discord_enabled:"false",notifications_discord_userid:"",email:"",phone:"",timezone:"Europe/Paris",locale:"French"},passwordForm:{oldPassword:"",password:"",password2:""},changeAvatar:{isModalShown:!1,isLoading:!1,isLoadingError:!1,formData:null}}},watch:{user:function(){Object.assign(this.form,this.user)}},computed:p(p({},Object(n["c"])(["changePassword","isCurrentUserAdmin","isSaveProfileLoading","isSaveProfileLoadingError","user"])),{},{departments:function(){return[{name:"Animation"},{name:"Modeling"}]},timezones:function(){return s.a.tz.names().filter((function(e){return e.indexOf("/")>0&&e.indexOf("Etc")<0}))}}),methods:p(p({},Object(n["b"])(["saveProfile","checkNewPasswordValidityAndSave","uploadAvatar","clearAvatar"])),{},{localeChanged:function(){this.$i18n.locale=this.form.locale.substring(0,2),"zh_Hans_CN"===this.form.locale?s.a.locale("zh_CN"):"zh_Hant_TW"===this.form.locale?(s.a.locale("zh_TW"),this.$i18n.locale="zw"):s.a.locale(this.form.locale.substring(0,2))},passwordChangeRequested:function(){var e=this;this.checkNewPasswordValidityAndSave({form:this.passwordForm,callback:function(){e.passwordForm={oldPassword:"",password:"",password2:""}}})},selectFile:function(e){this.$store.commit("CHANGE_AVATAR_FILE",e)},uploadAvatarFile:function(){var e=this;this.changeAvatar.isLoading=!0,this.changeAvatar.isError=!1,this.uploadAvatar((function(t){t&&(e.changeAvatar.isError=!0),e.changeAvatar.isLoading=!1,e.$refs.avatar.reloadAvatar(),e.hideAvatarModal()}))},hideAvatarModal:function(){this.changeAvatar.isModalShown=!1},showAvatarModal:function(){this.changeAvatar.isModalShown=!0},removeAvatar:function(){this.clearAvatar()}}),mounted:function(){this.form=Object.assign(this.form,this.user),this.form.notifications_enabled=this.form.notifications_enabled?"true":"false",this.form.notifications_slack_enabled=this.form.notifications_slack_enabled?"true":"false",this.form.notifications_mattermost_enabled=this.form.notifications_mattermost_enabled?"true":"false",this.form.notifications_discord_enabled=this.form.notifications_discord_enabled?"true":"false"},metaInfo:function(){return{title:"".concat(this.$t("profile.title")," - Kitsu")}}},g=h,w=(a("7fe0"),a("2877")),y=Object(w["a"])(g,o,i,!1,null,"6194dbb8",null);t["default"]=y.exports},"7fe0":function(e,t,a){"use strict";a("87aa")},"87aa":function(e,t,a){},c315:function(e,t,a){"use strict";a("e313")},e313:function(e,t,a){}}]);
//# sourceMappingURL=chunk-06abf103.9da0b6e3.js.map