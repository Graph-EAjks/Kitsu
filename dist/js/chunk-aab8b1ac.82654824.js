(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aab8b1ac"],{"0024":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"data-list"},[r("div",[r("table",{ref:"headerWrapper",staticClass:"datatable"},[r("thead",{staticClass:"datatable-head"},[r("tr",{staticClass:"datatable-row-header"},[r("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("tasks.fields.task_type"))+" ")]),r("th",{staticClass:"status"},[t._v(" "+t._s(t.$t("tasks.fields.task_status"))+" ")]),r("th",{staticClass:"estimation"},[t._v(" "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+". ")]),r("th",{staticClass:"estimation"},[t._v(" "+t._s(t.$t("tasks.fields.duration").substring(0,3))+". ")]),r("th",{staticClass:"startdate"},[t._v(" "+t._s(t.$t("tasks.fields.start_date_short"))+" ")]),r("th",{staticClass:"duedate"},[t._v(" "+t._s(t.$t("tasks.fields.due_date"))+" ")]),r("th",{staticClass:"assignees"},[t._v(" "+t._s(t.$t("tasks.fields.assignees"))+" ")]),r("th",{staticClass:"end-cell"})])])])]),r("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?r("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"task-list-body"},[r("table",{staticClass:"datatable"},[r("tbody",{staticClass:"datatable-body"},t._l(t.sortedEntries,(function(e){return r("tr",{key:"string"===typeof e?e:e.id,class:{selected:t.currentTask&&t.currentTask.id===e,"datatable-row":!0,"datatable-row--selectable":!0},on:{click:function(r){t.selectTask(t.getTask(e))}}},[t.getTaskType(e)?r("task-type-cell",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}):t._e(),r("td",{staticClass:"status"},[t.getTask(e)?r("validation-tag",{attrs:{task:t.getTask(e),"is-static":!0}}):t._e()],1),r("td",{staticClass:"estimation"},[t._v(" "+t._s(t.getTaskEstimation(e))+" ")]),r("td",{staticClass:"estimation"},[t._v(" "+t._s(t.getTaskDuration(e))+" ")]),r("td",{staticClass:"startdate"},[t._v(" "+t._s(t.getTaskStartDate(e))+" ")]),r("td",{staticClass:"duedate"},[t._v(" "+t._s(t.getTaskDueDate(e))+" ")]),r("td",{staticClass:"assignees"},[t.isCurrentUserClient||t.isCurrentUserVendor?t._e():r("div",{staticClass:"flexrow"},t._l(t.getAssignees(e),(function(s){return r("div",{key:s,staticClass:"avatar-wrapper"},[r("people-avatar",{key:e+"-"+s,staticClass:"person-avatar flexrow-item",attrs:{person:t.personMap.get(s),size:30,"font-size":15}})],1)})),0)]),r("td",{staticClass:"end-cell"})],1)})),0)])]):t._e()],1)},n=[],i=r("2f62"),a=r("31f2"),o=r("58f5"),c=r("e60b"),l=r("fe13"),u=r("eb8c");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t){return m(t)||b(t)||y(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){if(t){if("string"===typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function b(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function m(t){if(Array.isArray(t))return v(t)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return e=w(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=k(t,"string");return"symbol"===p(e)?e:String(e)}function k(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==p(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var O={name:"entity-task-list",mixins:[a["a"]],components:{TableInfo:c["a"],TaskTypeCell:o["a"],PeopleAvatar:u["a"],ValidationTag:l["a"]},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{currentTask:null}},computed:g(g({},Object(i["c"])(["currentProduction","getTaskTypePriority","isCurrentUserClient","isCurrentUserVendor","personMap","taskMap","taskTypeMap"])),{},{sortedEntries:function(){var t=this;return d(this.entries).sort((function(e,r){var s=t.getTask(e),n=t.getTask(r);if(!s)return!1;var i=t.taskTypeMap.get(s.task_type_id),a=t.taskTypeMap.get(n.task_type_id),o=t.getTaskTypePriority(s.task_type_id),c=t.getTaskTypePriority(n.task_type_id);return o===c?i.name.localeCompare(a.name):o-c}))}}),methods:g(g({},Object(i["b"])([])),{},{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},getTask:function(t){return"string"===typeof t?this.taskMap.get(t):t},getTaskStartDate:function(t){var e=this.getTask(t);return e&&e.start_date?e.start_date.substring(0,10):""},getTaskDueDate:function(t){var e=this.getTask(t);return e&&e.due_date?e.due_date.substring(0,10):""},getTaskEstimation:function(t){var e=this.getTask(t);return e&&e.estimation?this.formatDuration(e.estimation):""},getTaskDuration:function(t){var e=this.getTask(t);return e&&e.duration?this.formatDuration(e.duration):""},getTaskType:function(t){var e=this.getTask(t);return e?this.taskTypeMap.get(e.task_type_id):null},getAssignees:function(t){var e=this.getTask(t);return e?e.assignees:[]},selectTask:function(t){this.currentTask=t,this.$emit("task-selected",t)}})},j=O,C=(r("649b"),r("2877")),T=Object(C["a"])(j,s,n,!1,null,"aa89bef6",null);e["a"]=T.exports},"22a2":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt1 news flexcolumn"},[t.isLoading?r("div",{staticClass:"has-text-centered"},[r("spinner")],1):t.newsList.length>0?r("div",{staticClass:"news"},[r("div",{staticClass:"timeline"},t._l(t.newsList,(function(e){return r("div",{key:"news-"+e.id},[r("div",{staticClass:"news-line timeline-entry flexrow"},[r("span",{class:{dot:!0,red:t.hasRetakeValue(e),green:t.hasDoneValue(e)}}),r("span",{staticClass:"date flexrow-item"},[t._v(" "+t._s(t.formatFullDate(e.created_at))+" ")]),r("div",{staticClass:"flexrow-item task-type-wrapper"},[r("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNews(e),"production-id":t.currentProduction.id,"is-static":!0}})],1),r("div",{staticClass:"flexrow-item validation-wrapper"},[r("validation-tag",{staticClass:"validation-tag",attrs:{task:t.taskMap.get(e.task_id),"is-static":!0,thin:!e.change}})],1),r("div",{staticClass:"flexrow-item comment-content"},[r("div",[r("div",{staticClass:"news-info flexrow"},[t.personMap.get(e.author_id)?r("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap.get(e.author_id),size:30,"font-size":14,"is-link":!1}}):t._e(),r("span",{staticClass:"explaination flexrow-item"},[r("span",{staticClass:"strong person-name"},[t._v(" "+t._s(t.personName(e))+" ")])])],1)])])])])})),0)]):r("div",[t._v(" "+t._s(t.$t("entities.news.no_news"))+" ")])])},n=[],i=r("2f62"),a=r("7f45"),o=r.n(a),c=r("31f2"),l=r("c279"),u=r("be83"),p=r("eb8c"),d=r("274f"),f=r("fe13");function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e=h(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=g(t,"string");return"symbol"===y(e)?e:String(e)}function g(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==y(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var _={name:"entity-news",mixins:[c["a"],l["a"]],components:{PeopleAvatar:p["a"],Spinner:u["a"],TaskTypeName:d["a"],ValidationTag:f["a"]},data:function(){return{isLoading:!1,newsList:[]}},props:{entity:{type:Object,default:function(){}}},mounted:function(){this.entity&&this.reset()},computed:m({},Object(i["c"])(["currentProduction","personMap","taskMap","taskTypeMap","taskStatusMap","timezone"])),methods:m(m({},Object(i["b"])(["getEntityNews"])),{},{buildTaskTypeFromNews:function(t){return m(m({},this.taskTypeMap.get(t.task_type_id)),{},{episode_id:t.episode_id})},getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},hasRetakeValue:function(t){var e=this.taskStatusMap.get(t.task_status_id);return!!e&&(t.change&&e.is_retake)},hasDoneValue:function(t){var e=this.taskStatusMap.get(t.task_status_id);return!!e&&(t.change&&e.is_done)},formatTime:function(t){var e=o.a.tz(t,"UTC").tz(this.timezone);return e.format("HH:mm")},personName:function(t){var e=this.personMap.get(t.author_id);return e?e.full_name:""},reset:function(){var t=this;this.isLoading=!0,this.getEntityNews(this.entity.id).then((function(e){t.newsList=e.data,t.isLoading=!1})).catch((function(e){console.error(e),t.newsList=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},w=_,k=(r("90bc"),r("2877")),O=Object(k["a"])(w,s,n,!1,null,"ae9c27ce",null);e["a"]=O.exports},3768:function(t,e,r){},"4ee3":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt1 wrapper time-logs"},[t.isLoading?r("div",{staticClass:"has-text-centered"},[r("spinner")],1):t.logs.length>0?r("div",[r("table",{staticClass:"datatable"},[r("thead",{staticClass:"datatable-head"},[r("tr",{staticClass:"datatable-row-header"},[r("th",{staticClass:"date"},[t._v(" "+t._s(t.$t("main.date"))+" ")]),r("th",{staticClass:"person"},[t._v(" "+t._s(t.$t("main.person"))+" ")]),r("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("entities.preview_files.task_type"))+" ")]),r("th",{staticClass:"duration"},[t._v(" "+t._s(t.$t("tasks.fields.duration"))+" ")]),r("th",{staticClass:"end-cell"})])])]),r("table",{staticClass:"datatable"},[r("tbody",{staticClass:"datatable-body"},t._l(t.logs,(function(e){return r("tr",{key:e.id,staticClass:"datatable-row"},[r("td",{staticClass:"date"},[t._v(" "+t._s(t.formatSimpleDate(e.date))+" ")]),r("people-name-cell",{staticClass:"person",attrs:{person:t.personMap.get(e.person_id)}}),r("task-type-name",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}),r("td",{staticClass:"duration"},[t._v(" "+t._s(t.formatDuration(e.duration))+" ")]),r("td",{staticClass:"end-cell"})],1)})),0)])]):r("div",[t._v(" "+t._s(t.$t("entities.logs.no_logs"))+" ")])])},n=[],i=r("2f62"),a=r("31f2"),o=r("7365"),c=r("be83"),l=r("58f5");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e=y(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=b(t,"string");return"symbol"===u(e)?e:String(e)}function b(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==u(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m={name:"entity-time-logs",mixins:[a["a"]],components:{PeopleNameCell:o["a"],Spinner:c["a"],TaskTypeName:l["a"]},props:{entity:{type:Object,default:function(){}}},data:function(){return{logs:[],isLoading:!1}},mounted:function(){this.entity&&this.reset()},computed:d({},Object(i["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:d(d({},Object(i["b"])(["getEntityTimeLogs"])),{},{getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},reset:function(){var t=this;this.isLoading=!0,this.getEntityTimeLogs(this.entity.id).then((function(e){t.logs=e,t.isLoading=!1})).catch((function(e){console.error(e),t.logs=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},v=m,h=(r("9cd2"),r("2877")),g=Object(h["a"])(v,s,n,!1,null,"acb7aec0",null);e["a"]=g.exports},"608a":function(t,e,r){},"649b":function(t,e,r){"use strict";r("6ae0")},"6ae0":function(t,e,r){},"6c78":function(t,e,r){"use strict";r("954a")},7365:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",{staticClass:"name",attrs:{scope:"row"}},[r("div",{staticClass:"people-name"},[r("people-avatar",{staticClass:"avatar",attrs:{person:t.person}}),r("people-name",{staticClass:"people-name",attrs:{"with-link":"",person:t.person}})],1)])},n=[],i=r("2f62"),a=r("eb8c"),o=r("0073");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e=d(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=f(t,"string");return"symbol"===c(e)?e:String(e)}function f(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==c(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var y={name:"people-name-cell",components:{PeopleName:o["a"],PeopleAvatar:a["a"]},props:{person:{type:Object,required:!0}},computed:u({},Object(i["c"])([])),methods:u({},Object(i["b"])([]))},b=y,m=(r("6c78"),r("2877")),v=Object(m["a"])(b,s,n,!1,null,"badaef58",null);e["a"]=v.exports},"90bc":function(t,e,r){"use strict";r("608a")},"954a":function(t,e,r){},"9cd2":function(t,e,r){"use strict";r("e951")},b2f9:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt1 flexcolumn wrapper preview-files"},[t.isLoading?r("div",{staticClass:"has-text-centered"},[r("spinner")],1):t.previewFiles.length>0?r("div",[r("table",{staticClass:"datatable"},[r("thead",{staticClass:"datatable-head"},[r("tr",{staticClass:"datatable-row-header"},[r("th",{staticClass:"thumbnail"}),r("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("entities.preview_files.task_type"))+" ")]),r("th",{staticClass:"revision"},[t._v(" "+t._s(t.$t("entities.preview_files.revision"))+" ")]),r("th",{staticClass:"original-name"},[t._v(" "+t._s(t.$t("entities.preview_files.original_file_name"))+" ")]),r("th",{staticClass:"extension"},[t._v(" "+t._s(t.$t("entities.preview_files.extension"))+" ")]),r("th",{staticClass:"size"},[t._v(" "+t._s(t.$t("entities.preview_files.size"))+" ")]),r("th",{staticClass:"status"},[t._v(" "+t._s(t.$t("entities.preview_files.status"))+" ")]),r("th",{staticClass:"uploader"},[t._v(" "+t._s(t.$t("entities.preview_files.uploader"))+" ")]),r("th",{staticClass:"person"}),r("th",{staticClass:"end-cell"})])])]),r("table",{staticClass:"datatable",staticStyle:{overflow:"auto"}},[r("tbody",{staticClass:"datatable-body"},t._l(t.previewFiles,(function(e){return r("tr",{key:e.id,staticClass:"datatable-row"},[r("td",{staticClass:"thumbnail"},[r("entity-thumbnail",{staticClass:"preview-thumbnail",attrs:{"preview-file-id":e.id,"empty-width":60,width:60}})],1),r("task-type-name",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}),r("td",{staticClass:"revision"},[t._v(" "+t._s(e.revision)+" ")]),r("td",{staticClass:"original-name"},[t._v(" "+t._s(e.original_name)+" ")]),r("td",{staticClass:"extension"},[t._v(" "+t._s(e.extension)+" ")]),r("td",{staticClass:"size"},[t._v(" "+t._s(t.renderFileSize(e.file_size))+" ")]),r("td",{staticClass:"status"},[t._v(" "+t._s(e.validation_status)+" ")]),r("people-name-cell",{staticClass:"person",attrs:{person:t.personMap.get(e.person_id)}}),r("td",{staticClass:"download"},[r("a",{staticClass:"button flexrow-item",attrs:{href:t.getDownloadPath(e.id),title:t.$t("playlists.actions.download_file")}},[r("download-icon",{staticClass:"icon is-small"})],1)])],1)})),0)])]):r("div",[t._v(" "+t._s(t.$t("entities.preview_files.no_preview_files"))+" ")])])},n=[],i=r("2f62"),a=r("0a35"),o=r("66be"),c=r("bb21"),l=r("7365"),u=r("be83"),p=r("58f5");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e=m(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=v(t,"string");return"symbol"===d(e)?e:String(e)}function v(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==d(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var h={name:"entity-preview-files",components:{DownloadIcon:a["v"],EntityThumbnail:c["a"],PeopleNameCell:l["a"],Spinner:u["a"],TaskTypeName:p["a"]},data:function(){return{isLoading:!1,previewFiles:[]}},props:{entity:{type:Object,default:function(){}}},mounted:function(){this.entity&&this.reset()},computed:y({},Object(i["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:y(y({},Object(i["b"])(["getEntityPreviewFiles"])),{},{getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},getDownloadPath:function(t){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(t,"/download")},renderFileSize:o["c"],reset:function(){var t=this;this.isLoading=!0,this.getEntityPreviewFiles(this.entity.id).then((function(e){t.previewFiles=e,t.isLoading=!1})).catch((function(e){console.error(e),t.previewFiles=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},g=h,_=(r("c9ae"),r("2877")),w=Object(_["a"])(g,s,n,!1,null,"00091054",null);e["a"]=w.exports},c9ae:function(t,e,r){"use strict";r("3768")},e951:function(t,e,r){},f58f:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var s=r("3657"),n=r("c1df"),i=r.n(n);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e=u(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=p(t,"string");return"symbol"===a(e)?e:String(e)}function p(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!==a(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var d={data:function(){return{currentSection:"Casting",zoomLevel:1,entityNavOptions:[{label:"Casting",value:"casting"},{label:"Schedule",value:"schedule"},{label:"Preview Files",value:"preview-files"},{label:"Activity",value:"activity"},{label:"Timelog",value:"time-logs"}],zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]}},created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{thumbnailPath:function(){var t=this.currentEntity.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentEntity&&this.currentEntity.preview_file_id&&this.currentEntity.preview_file_id.length>0},currentTasks:function(){var t=this,e=this.currentAsset||this.currentShot||this.currentEdit||this.currentEpisode;return e&&e.tasks&&e?e.tasks.map((function(e){return t.taskMap.get(e)})).filter((function(t){return t})).sort((function(e,r){var s=t.getTaskTypePriority(e.task_type_id),n=t.getTaskTypePriority(r.task_type_id);return s-n})):[]},tasksStartDate:function(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?Object(s["l"])(this.scheduleItems[0].children).clone().add(-60,"days"):i()()},tasksEndDate:function(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?Object(s["m"])(this.scheduleItems[0].children).clone().add(60,"days"):i()().add(30,"days")},scheduleItems:function(){var t=this,e=0,r={avatar:!1,id:"root",name:"Tasks",color:"#888",priority:1,expanded:!0,loading:!1,children:[],editable:!1},n=i()(),a=this.currentTasks.map((function(i){var a,o=t.formatDuration(i.estimation),l=n.clone();if(!i.start_date&&!i.real_start_date&&!i.due_date&&!i.end_date)return null;i.start_date?l=Object(s["u"])(i.start_date):i.real_start_date&&(l=Object(s["u"])(i.real_start_date)),i.due_date?a=Object(s["u"])(i.due_date):i.end_date?a=Object(s["u"])(i.end_date):i.estimation&&(a=l.clone().add(o,"days")),a&&!a.isBefore(l)||(a=l.clone().add(1,"days")),o&&(e+=i.estimation);var u=t.taskTypeMap.get(i.task_type_id);return c(c({},i),{},{name:u.name,startDate:l,endDate:a,expanded:!1,loading:!1,man_days:o,editable:!1,unresizable:!1,parentElement:r,color:u.color,children:[]})})).filter((function(t){return null!==t})),o=i()(),l=i()().add(1,"days");return a.length>0&&(o=Object(s["l"])(a),l=Object(s["m"])(a)),Object.assign(r,{children:a,startDate:o,endDate:l,man_days:e}),[r]}},methods:{changeTab:function(t){this.selectedTab=t},onEditClicked:function(){this.modals.edit=!0},onTaskSelected:function(t){this.currentTask&&this.currentTask.id===t.id?this.currentTask=null:this.currentTask=t}},watch:{currentSection:function(){this.$router.push({query:{section:this.currentSection}});var t=this.$refs["schedule-widget"];"schedule"===this.currentSection&&t&&t.scrollToToday()}}}}}]);
//# sourceMappingURL=chunk-aab8b1ac.82654824.js.map